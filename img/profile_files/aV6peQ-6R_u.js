if (self.CavalryLogger) { CavalryLogger.start_js(["rD57l"]); }

__d('ReactComposerShareNowActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirror')({SHOW_SHARENOW_MENU:null,SHARE_NOW:null,OPEN_FRIEND_TIMELINE_DIALOG:null,OPEN_MESSAGE_DIALOG:null,OPEN_SHARE_DIALOG:null,CANCEL_SHARE:null});}),null);
__d('ReactComposerShareNowActions',['ReactComposerDispatcher','ReactComposerShareNowActionTypes'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={showShareNowMenu:function i(){c('ReactComposerDispatcher').dispatch({composerID:'',type:c('ReactComposerShareNowActionTypes').SHOW_SHARENOW_MENU,suppressWaterfallLogging:true});},clickShareNow:function i(){c('ReactComposerDispatcher').dispatch({composerID:'',type:c('ReactComposerShareNowActionTypes').SHARE_NOW,suppressWaterfallLogging:true});},clickWritePost:function i(){c('ReactComposerDispatcher').dispatch({composerID:'',type:c('ReactComposerShareNowActionTypes').OPEN_SHARE_DIALOG,suppressWaterfallLogging:true});},clickSendMessage:function i(){c('ReactComposerDispatcher').dispatch({composerID:'',type:c('ReactComposerShareNowActionTypes').OPEN_MESSAGE_DIALOG,suppressWaterfallLogging:true});},clickShareFriendTimeline:function i(){c('ReactComposerDispatcher').dispatch({composerID:'',type:c('ReactComposerShareNowActionTypes').OPEN_FRIEND_TIMELINE_DIALOG,suppressWaterfallLogging:true});},cancelShare:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerShareNowActionTypes').CANCEL_SHARE});}};f.exports=h;}),null);
__d('DialogExpansionAtWidth',['DialogExpansion'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('DialogExpansion'));i=h&&h.prototype;j.prototype._getWidth=function(){'use strict';return this._dialog.getWidth();};function j(){'use strict';h.apply(this,arguments);}f.exports=j;}),null);
__d('ShareDialogTitle.react',['cx','fbt','ShareDialogAudienceSelector.react','ShareDialogAudienceText.react','ShareDialogAudienceTypes','ShareDialogDataSources','ShareDialogStatusTypes','SharerType','React','LeftRight.react','XUICloseButton.react','XUIDialogTitle.react','emptyFunction'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('ShareDialogDataSources').TYPES,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;n.prototype.render=function(){'use strict';var o=this.props.dataSources,p=this.props.activeAudience,q=[];switch(this.props.sharerType){case c('SharerType').MESSAGE_ONLY:q.push(c('ShareDialogAudienceTypes').MESSAGE);break;case c('SharerType').FRIEND_TIMELINE_ONLY:q.push(c('ShareDialogAudienceTypes').PERSON);break;case c('SharerType').PAGE_ONLY:q.push(c('ShareDialogAudienceTypes').PAGE);break;case c('SharerType').OWN_ONLY:case c('SharerType').PAGE_VIEWER:q.push(c('ShareDialogAudienceTypes').OWN);break;default:q.push(c('ShareDialogAudienceTypes').OWN);if(o.getSource(l.PERSON_WALL))q.push(c('ShareDialogAudienceTypes').PERSON);if(o.getSource(l.GROUP))q.push(c('ShareDialogAudienceTypes').GROUP);if(o.getSource(l.EVENT))q.push(c('ShareDialogAudienceTypes').EVENT);if(o.getSource(l.PAGE))q.push(c('ShareDialogAudienceTypes').PAGE);if(o.getSource(l.MESSAGE))q.push(c('ShareDialogAudienceTypes').MESSAGE);}var r;if(this.props.status.type===c('ShareDialogStatusTypes').COMPOSING){r=c('React').createElement('div',{className:"_1jlx"},c('React').createElement(c('ShareDialogAudienceSelector.react'),{allowedAudiences:q,activeAudience:p,onAudienceSelect:this.props.onAudienceSelect}));}else if(this.props.status.type===c('ShareDialogStatusTypes').POSTING){r=c('React').createElement(c('ShareDialogAudienceText.react'),{className:"_4zt0",audience:p});}else if(this.props.status.type===c('ShareDialogStatusTypes').ERROR){r=c('React').createElement('span',{className:"_4zt0"},this.props.status.title||i._("We're Sorry"));}else if(this.props.status.type===c('ShareDialogStatusTypes').SUCCESS)r=this.props.status.title?c('React').createElement('span',{className:"_4zt0"},this.props.status.title):null;if(!r)return c('React').createElement('noscript',null);return (c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false,className:"_5t22"},r,this.props.children,c('React').createElement(c('XUICloseButton.react'),{className:"_51-t _3chm",label:i._("Close"),onClick:this.props.onClose})));};function n(){'use strict';j.apply(this,arguments);}n.propTypes={activeAudience:function o(p){if(!c('ShareDialogAudienceTypes').isValid(p.activeAudience))return new Error('The active audience is invalid.');},status:m.shape({type:m.string.isRequired,title:m.oneOfType([m.string,m.object]),message:m.oneOfType([m.string,m.object])}).isRequired,dataSources:m.instanceOf(c('ShareDialogDataSources')),onAudienceSelect:m.func,onClose:m.func};n.defaultProps={onAudienceSelect:c('emptyFunction'),onClose:c('emptyFunction'),status:{type:c('ShareDialogStatusTypes').COMPOSING}};f.exports=n;}),null);
__d('ReactShareDialog.react',['cx','fbt','ReactComposerContextMixin','ReactComposerLoggingConfig','ShareDialogAudience.react','ReactShareDialogComposer.react','ShareDialogDataSources','ShareDialogStatusTypes','ShareDialogTitle.react','SharerType','AccessibleLayer','CurrentUser','DialogExpansionAtWidth','LayerFadeOnHide','LayerHideOnEscape','React','TooltipLink.react','XUIDialog.react','XUIDialogBody.react','XUIDialogCloseButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUISpinner.react','emptyFunction','getOwnObjectValues'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k='react_share_dialog_content',l=c('React').createClass({displayName:'ReactShareDialog',mixins:[c('ReactComposerContextMixin')],propTypes:{appId:j.string,attachment:j.object,causalElement:j.instanceOf(HTMLElement),customModules:j.shape({groups:j.arrayOf(j.func)}),dataSources:j.instanceOf(c('ShareDialogDataSources')),isThrowbackPost:j.bool,loggingConfig:c('ReactComposerLoggingConfig').isRequired,messageTags:j.array,messageTargets:j.array,onCancel:j.func.isRequired,onChangeAudienceTargets:j.func.isRequired,onClearAudienceTargets:j.func.isRequired,onPost:j.func.isRequired,postId:j.string.isRequired,privacySelector:j.any.isRequired,publicityWarning:j.object,sharerType:j.oneOf(c('getOwnObjectValues')(c('SharerType'))),shareType:j.string,showDoingNUX:j.bool,status:j.shape({message:j.oneOfType([j.string,j.object]),title:j.oneOfType([j.string,j.object]),type:j.string.isRequired}).isRequired,taggersConfig:j.object.isRequired,triggeredFrom:c('ReactShareDialogComposer.react').propTypes.triggeredFrom,userId:j.string.isRequired},getDefaultProps:function m(){return {onCancel:c('emptyFunction'),onPost:c('emptyFunction'),onChangeAudienceTargets:c('emptyFunction'),onClearAudienceTargets:c('emptyFunction'),sharerType:c('SharerType').ALL_MODES,status:{type:c('ShareDialogStatusTypes').COMPOSING}};},_getMessage:function m(){var n=null;if(this.props.status.type==='error'){n=this.props.status.message||i._("This post could not be shared at this time. Please try again later.");}else if(this.props.status.type==='success')n=this.props.status.message||i._("Your share was posted.");if(n){var o=typeof n!=='string'&&n.__html?c('React').createElement('span',{dangerouslySetInnerHTML:n}):n;return c('React').createElement(c('XUIDialogBody.react'),null,o);}return null;},_getOverlay:function m(){var n=c('React').createElement('noscript',null);if(this.props.status.type==='posting')n=c('React').createElement('div',{className:"_51jk"},c('React').createElement(c('XUISpinner.react'),{size:'large',className:"_51jl"}));return n;},_getFooter:function m(){if(this.props.status.type!=='error'||this.props.renderInline){return c('React').createElement('noscript',null);}else return (c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCloseButton.react'),{use:'confirm'})));},_getTitle:function m(){if(!this.props.status.title||this.props.renderInline){return c('React').createElement('noscript',null);}else{var n=this.props.status.title,o=typeof n!=='string'&&n.__html?c('React').createElement('span',{dangerouslySetInnerHTML:n}):n;return (c('React').createElement(c('XUIDialogTitle.react'),null,o));}},render:function m(){var n=c('CurrentUser').isEmployee()?c('React').createElement(c('TooltipLink.react'),{className:"_2jxp uiHelpLink",href:'/groups/761337780581506/',tooltip:'Provide feedback on the React Share Composer (fb-only).',target:'_blank'}):null,o=this._getMessage()||[c('React').createElement(c('ShareDialogTitle.react'),{key:'title',activeAudience:this.props.activeAudience,dataSources:this.props.dataSources,onAudienceSelect:this.props.onTargetSelect,onClose:this.props.onCancel,renderInline:this.props.renderInline,sharerType:this.props.sharerType,status:this.props.status},n),c('React').createElement(c('ShareDialogAudience.react'),{activeAudience:this.props.activeAudience,customModules:this.props.customModules,dataSources:this.props.dataSources,defaultPageTargetID:this.props.defaultPageTargetID,key:'audience',messageTargets:this.props.messageTargets,onChange:this.props.onChangeAudienceTargets,onClear:this.props.onClearAudienceTargets,userId:this.props.userId,lockMessageTargets:this.props.lockMessageTargets}),c('React').createElement(c('ReactShareDialogComposer.react'),babelHelpers['extends']({key:'composer'},this.props))];return (c('React').createElement(c('XUIDialog.react'),{behaviors:{AccessibleLayer:c('AccessibleLayer'),DialogExpansion:c('DialogExpansionAtWidth'),LayerFadeOnHide:c('LayerFadeOnHide'),LayerHideOnEscape:c('LayerHideOnEscape')},causalElementRef:function(){return this.props.causalElement;}.bind(this),className:"_51jd",layerHideOnBlur:false,modal:true,shown:this.props.shown,width:496},this._getTitle(),c('React').createElement('div',{ref:'dialog','data-testid':k},o),this._getOverlay(),this._getFooter()));}});f.exports=l;}),null);
__d('ReactShareDialogContainer.react',['ReactComposerContextMixin','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerAudienceStore','ReactComposerShareNowActions','ReactComposerStatusStore','ReactComposerTaggerStore','ReactComposerTaggerType','ReactComposerTopicFeedsTaggerStore','ComposerXSessionIDs','FBID','MercuryIDs','MercuryThreads','ReactShareDialogComposerActions','ReactShareDialogComposerStore','ShareDialogAudienceTypes','ReactShareDialog.react','SharerType','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('MercuryThreads').get(),i=c('React').createClass({displayName:'ReactShareDialogContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextMixin'),c('ReactComposerPropsAndStoreBasedStateMixin')(c('ReactShareDialogComposerStore'))],statics:{beforeCalculateInitialState:function j(k,l){var m=l.defaultAudience?l.defaultAudience:c('ShareDialogAudienceTypes').OWN;if(l.sharerType===c('SharerType').MESSAGE_ONLY){m=c('ShareDialogAudienceTypes').MESSAGE;}else if(l.sharerType===c('SharerType').PAGE_ONLY)m=c('ShareDialogAudienceTypes').PAGE;c('ReactShareDialogComposerActions').setTarget(k,m);c('ReactShareDialogComposerActions').setTargetInfo(k,{userId:l.userId});},calculateState:function j(k,l){var m=c('ReactShareDialogComposerStore').getTargetInfo(k),n=m.audienceTargets,o=m.userId;return {activeAudience:c('ReactShareDialogComposerStore').getTarget(k),audienceTargets:n,userId:o};}},getInitialState:function j(){return {shown:true};},componentWillMount:function j(){c('ComposerXSessionIDs').resetSessionID(this.props.contextConfig.composerID);},componentWillReceiveProps:function j(k){if(k.status.type==='success'&&this.state.shown)setTimeout(function(){return this.setState({shown:false});}.bind(this),2500);},render:function j(){return (c('React').createElement(c('ReactShareDialog.react'),babelHelpers['extends']({},this.props,this.state,{onCancel:this._onCancel,onChangeAudienceTargets:this._onChangeAudienceTargets,onClearAudienceTargets:this._onClearAudienceTargets,onPost:this._onPost,onTargetSelect:this._onTargetSelect})));},_getStatefulResponse:function j(){var k=this.props.contextConfig.composerID,l=c('ReactComposerTaggerStore').getTaggersData(k),m=c('ReactComposerAudienceStore').getAudience(k),n=c('ReactComposerStatusStore').getMessage(k),o=c('ReactShareDialogComposerStore').getTarget(k),p=c('ReactShareDialogComposerStore').getTargetInfo(k),q=c('ReactShareDialogComposerStore').getTargetedPrivacyData(k),r=p.audienceTargets?p.audienceTargets:[],s=0;if(r.length===1){var t=c('FBID').isUser(r[0])?c('MercuryIDs').getThreadIDFromUserID(r[0]):c('MercuryIDs').getThreadIDFromThreadFBID(r[0]),u=h.getThreadMetaNow(t);s=u?u.ephemeral_ttl_mode:0;}var v=l[c('ReactComposerTaggerType').PEOPLE],w=l[c('ReactComposerTaggerType').LOCATION],x=l[c('ReactComposerTaggerType').ACTIVITY],y=v.map(function(ga){return ga.getUniqueID();}),z=null,aa=null;if(x.object){var ba=x.object.getUniqueID(),ca=x.object.getTitle();if(!ba||ba===ca){aa=ca;}else z=ba;}var da=null;if(!c('ReactComposerTopicFeedsTaggerStore').getIsDarkLaunch(k))da=c('ReactComposerTopicFeedsTaggerStore').getTaggedTopics(k).toArray();var ea=c('ReactShareDialogComposerStore').getShareDialogType(k),fa=c('ReactShareDialogComposerStore').getShareToGroupsAsPage(k);return {actorId:p.userId,appId:this.props.appId,audienceTargets:r,audienceType:o,composerSessionID:c('ComposerXSessionIDs').getSessionID(k),ephemeralTTLMode:s,internalExtra:this.props.internalExtra,internalPreviewImageID:this.props.internalPreviewImageID,isForcedReshareOfPost:ea,message:n,messageTags:this.props.messageTags,ownerId:this.props.ownerId,postId:this.props.postId,privacy:m,sharedAdId:this.props.sharedAdId,shareToGroupAsPage:fa,shareType:this.props.shareType,source:'osbach',taggedActionIconId:x.actionIconID,taggedActionId:x.action?x.action.getUniqueID():null,taggedFeedTopics:da,taggedObjectId:z,taggedObjectStr:aa,taggedPeople:y,taggedPlace:w&&w.place?w.place.getUniqueID():null,targetedPrivacyData:q,url:this.props.url};},_onTargetSelect:function j(k){c('ReactShareDialogComposerActions').setTarget(this.context.composerID,k);c('ReactShareDialogComposerActions').setTargetInfo(this.context.composerID,{audienceTargets:null,userId:this.props.userId});},_onCancel:function j(){c('ReactComposerShareNowActions').cancelShare(this.context.composerID);this.setState({shown:false});this.props.onCancel&&this.props.onCancel(this._getStatefulResponse());},_onChangeAudienceTargets:function j(k){if(k.length===0)return;var l=k[0],m=this.state.activeAudience===c('ShareDialogAudienceTypes').PAGE?{audienceTargets:[l.pageId],userId:l.actorId}:{audienceTargets:k,userId:this.props.userId};c('ReactShareDialogComposerActions').setTargetInfo(this.context.composerID,m);},_onClearAudienceTargets:function j(){c('ReactShareDialogComposerActions').setTargetInfo(this.context.composerID,{audienceTargets:null,userId:this.props.userId});},_onPost:function j(){this.props.onPost(this._getStatefulResponse());}});f.exports=i;}),null);
__d('ReactShareDialogRoot.react',['ReactComposerContextConfig','ReactComposerContextProviderMixin','ReactShareDialogContainer.react','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'ReactShareDialogRoot',mixins:[c('ReactComponentWithPureRenderMixin'),c('ReactComposerContextProviderMixin')],propTypes:{contextConfig:c('ReactComposerContextConfig').isRequired},render:function i(){return c('React').createElement(c('ReactShareDialogContainer.react'),this.props);}});f.exports=h;}),null);
__d('ShareDialogOsbachController',['ActorURI','AsyncRequest','AsyncResponse','ReactComposerActions','ComposerEntryPointRef','DOM','OnlyMeSharerSaveNux.react','React','ReactDOM','ShareDialogDataSources','ReactShareDialogRoot.react','ShareDialogStatusTypes','XShareDialogSubmitController','destroyOnUnload','getActiveElement','uniqueID'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h,i,j,k,l,m,n;function o(){s({type:'posting'});}function p(u){s({message:u.payload.message,shareType:u.payload.audience,showOnlyMeSharerSaveNux:u.payload.showOnlyMeSharerSaveNux,type:'success'});}function q(u){c('AsyncResponse').defaultErrorHandler(u);s({type:c('ShareDialogStatusTypes').COMPOSING});}function r(u){if(u.error)s({type:c('ShareDialogStatusTypes').COMPOSING});}function s(u){if(u.showOnlyMeSharerSaveNux&&u.shareType&&k&&l&&m){c('ReactDOM').render(c('React').createElement(c('OnlyMeSharerSaveNux.react'),{caretId:k,storyContainerId:l,collectionId:m,objectId:n,shareType:u.shareType}),i);}else c('ReactDOM').render(c('React').createElement(c('ReactShareDialogRoot.react'),babelHelpers['extends']({},h,{contextConfig:{actorID:h.userId,composerID:j,composerType:c('ComposerEntryPointRef').FEED_STORY,gks:h.gks,targetID:h.userId},shown:true,onPost:function v(w){t.onPost(w,o,p,q,r);},status:u})),i);}var t={getPropsFromAsyncResponse:function u(v){var w=v.sources,x=babelHelpers.objectWithoutProperties(v,['sources']),y=w.person,z=w.personTag,aa=w.personWall,ba=w.group,event=w.event,ca=w.page,da=w.mentions,ea=w.place,fa=w.action,ga=w.object,ha=new (c('ShareDialogDataSources'))().addSource(c('ShareDialogDataSources').TYPES.ACTION,fa).addSource(c('ShareDialogDataSources').TYPES.EVENT,event).addSource(c('ShareDialogDataSources').TYPES.GROUP,ba).addSource(c('ShareDialogDataSources').TYPES.MENTIONS,da).addSource(c('ShareDialogDataSources').TYPES.MESSAGE,y).addSource(c('ShareDialogDataSources').TYPES.OBJECT,ga).addSource(c('ShareDialogDataSources').TYPES.PAGE,ca).addSource(c('ShareDialogDataSources').TYPES.PERSON,z).addSource(c('ShareDialogDataSources').TYPES.PERSON_WALL,aa).addSource(c('ShareDialogDataSources').TYPES.PLACE,ea);return babelHelpers['extends']({dataSources:ha},x);},onPost:function u(v,w,x,y,z){w&&w();var aa=c('XShareDialogSubmitController').getURIBuilder().setInt('app_id',v.appId).setInt('attribution',v.attributionId).setString('audience_type',v.audienceType).setIntVector('audience_targets',v.audienceTargets).setString('composer_session_id',v.composerSessionID).setInt('ephemeral_ttl_mode',v.ephemeralTTLMode).setStringToStringMap('internalextra',v.internalExtra||h&&h.internalExtra).setInt('internal_preview_image_id',v.internalPreviewImageID).setBool('is_forced_reshare_of_post',v.isForcedReshareOfPost).setString('message',v.message).setStringVector('messaging_tags',v.messageTags).setInt('owner_id',v.ownerId).setInt('post_id',v.postId).setString('privacy',v.privacy).setBool('share_to_group_as_page',!!v.shareToGroupAsPage).setInt('share_type',v.shareType).setInt('shared_ad_id',v.sharedAdId).setString('source',v.source).setInt('tagged_action',v.taggedActionId).setInt('tagged_object',v.taggedObjectId).setString('tagged_object_str',v.taggedObjectStr).setInt('tagged_action_icon',v.taggedActionIconId).setIntVector('tagged_people',v.taggedPeople).setInt('tagged_place',v.taggedPlace).setStringVector('tagged_feed_topics',v.taggedFeedTopics).setHackType('targeted_privacy_data',v.targetedPrivacyData).setBool('is_throwback_post',h.isThrowbackPost).setString('url',v.url).getURI();aa=c('ActorURI').create(aa,v.actorId);new (c('AsyncRequest'))().setURI(aa).setMethod('POST').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(){c('ReactComposerActions').postSucceeded(j);for(var ba=arguments.length,ca=Array(ba),da=0;da<ba;da++)ca[da]=arguments[da];x.apply(null,ca);}).setErrorHandler(y).setFinallyHandler(z).send();},setup:function u(v,w,x,y,z,aa){v.causalElement=c('getActiveElement')();h=t.getPropsFromAsyncResponse(v);i=w;j=c('uniqueID')();k=x;l=y;m=z;n=aa;s({type:c('ShareDialogStatusTypes').COMPOSING});c('destroyOnUnload')(function(){c('ReactDOM').unmountComponentAtNode(i);c('DOM').remove(i);});}};f.exports=t;}),null);