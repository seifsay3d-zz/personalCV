if (self.CavalryLogger) { CavalryLogger.start_js(["92Iga"]); }

__d("VideoChannelRequestStatus",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SUCCEEDED:"succeeded",FAILED:"failed",ABORTED:"aborted"};}),null);
__d('VideoChannelProgressCircle.react',['cx','React','ReactDOM','Style'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$VideoChannelProgressCircle1=0,this.$VideoChannelProgressCircle2=0,n;}l.prototype.componentDidMount=function(){'use strict';this.drawProgressCircle(this.props);};l.prototype.componentWillUnmount=function(){'use strict';clearInterval(this.$VideoChannelProgressCircle1);};l.prototype.componentWillReceiveProps=function(m){'use strict';if(m.makeProgress!==this.props.makeProgress||m.timeoutSec!==this.props.timeoutSec)this.drawProgressCircle(m);};l.prototype.drawProgressCircle=function(m){'use strict';var n=c('ReactDOM').findDOMNode(this.refs.progressCircle),o=this.$VideoChannelProgressCircle2,p=o/100;c('Style').set(n,'stroke-dashoffset',o+'px');clearInterval(this.$VideoChannelProgressCircle1);if(m.makeProgress)this.$VideoChannelProgressCircle1=setInterval(function(){o-=p;c('Style').set(n,'stroke-dashoffset',o+'px');if(o<=0){clearInterval(this.$VideoChannelProgressCircle1);c('Style').set(n,'stroke-dashoffset','0px');m.onProgressDone&&m.onProgressDone();}}.bind(this),m.timeoutSec*10);};l.prototype.render=function(){'use strict';var m=this.props.watchAndScroll?34:80,n=this.props.watchAndScroll?2:4,o=m/2,p=o-n/2;this.$VideoChannelProgressCircle2=p*2*Math.PI;return (c('React').createElement('div',null,c('React').createElement('svg',{className:"_20_8"},c('React').createElement('circle',{cx:o,cy:o,r:p,stroke:'#ffffff',strokeWidth:n,strokeDasharray:this.$VideoChannelProgressCircle2,fill:'transparent'}),c('React').createElement('circle',{ref:'progressCircle',cx:o,cy:o,r:p,stroke:'#5890ff',strokeWidth:n,strokeDasharray:this.$VideoChannelProgressCircle2,fill:'transparent'})),this.props.children));};l.propTypes={children:k.element,makeProgress:k.bool.isRequired,onProgressDone:k.func,timeoutSec:k.number.isRequired,watchAndScroll:k.bool};f.exports=l;}),null);
__d('VideoChannelReplayImage.react',['cx','Image.react','React'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';return (c('React').createElement(c('Image.react'),{className:"_4nxy"+(this.props.size==='small'?' '+"_4nxz":''),src:'/images/video/channel_view/replay.svg'}));};function k(){'use strict';i.apply(this,arguments);}k.defaultProps={size:'normal'};f.exports=k;}),null);
__d("XVideoChannelViewAsyncController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/channel\/view\/async\/{id}\/",{id:{type:"String",required:true},original_video_id:{type:"String",required:true},cursor:{type:"String"},story_count:{type:"Int",defaultValue:3},caller:{type:"Enum",defaultValue:"channel_view_from_unknown",enumType:1}});}),null);
__d("XVideoChannelViewStoryAsyncController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/channel\/view\/story\/async\/{root_video_id}\/",{root_video_id:{type:"String",required:true},video_ids:{type:"StringVector",defaultValue:[]},use_video_placeholder:{type:"Bool",defaultValue:false},setup_interactions:{type:"Bool",defaultValue:false},is_first_story:{type:"Bool",defaultValue:false},feed_tracking_data:{type:"StringVector",defaultValue:[]},caller:{type:"Enum",defaultValue:"channel_view_from_unknown",enumType:1},channel_id:{type:"String"},ad_impression_token:{type:"String"}});}),null);
__d('VideoChannelStoryFetcher',['AsyncRequest','HTML','VideoChainingCaller','VideoChannelLogger','VideoChannelLoggerEvents','VideoChannelLoggerFields','VideoChannelRequestStatus','VideoChannelViewVariables','XVideoChannelViewAsyncController','XVideoChannelViewStoryAsyncController'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k,l,m,n,o){'use strict';this.$VideoChannelStoryFetcher7=i;this.$VideoChannelStoryFetcher8=j;this.$VideoChannelStoryFetcher4=k;this.$VideoChannelStoryFetcher10=0;this.$VideoChannelStoryFetcher2=null;this.$VideoChannelStoryFetcher3=true;this.$VideoChannelStoryFetcher5=[];this.$VideoChannelStoryFetcher6=[];this.$VideoChannelStoryFetcher9={};if(m){this.$VideoChannelStoryFetcher5=m.videoIDs;this.$VideoChannelStoryFetcher6=m.feedTrackingData;this.$VideoChannelStoryFetcher2=m.cursorInfo.cursor;this.$VideoChannelStoryFetcher3=m.cursorInfo.hasNextPage;var p=this.$VideoChannelStoryFetcher5.indexOf(this.$VideoChannelStoryFetcher7);c('VideoChannelLogger').setOffset(p);this.$VideoChannelStoryFetcher9.start=p;this.$VideoChannelStoryFetcher9.end=p+1;}if(n){this.$VideoChannelStoryFetcher5=n;this.$VideoChannelStoryFetcher3=!!o;var q=this.$VideoChannelStoryFetcher5.indexOf(this.$VideoChannelStoryFetcher7);c('VideoChannelLogger').setOffset(q);this.$VideoChannelStoryFetcher9.start=q;this.$VideoChannelStoryFetcher9.end=q+1;}c('VideoChannelLogger').setPosition(0);this.$VideoChannelStoryFetcher11=l;this.$VideoChannelStoryFetcher12=[];this.$VideoChannelStoryFetcher13=[];}h.prototype.reset=function(i,j){'use strict';this.$VideoChannelStoryFetcher7=i;this.$VideoChannelStoryFetcher8=j;this.$VideoChannelStoryFetcher10=0;this.$VideoChannelStoryFetcher2=null;this.$VideoChannelStoryFetcher3=true;this.$VideoChannelStoryFetcher5=[];this.$VideoChannelStoryFetcher6=[];this.$VideoChannelStoryFetcher9={};this.$VideoChannelStoryFetcher12=[];this.$VideoChannelStoryFetcher13=[];};h.prototype.abandonRequest=function(){'use strict';this.$VideoChannelStoryFetcher1&&this.$VideoChannelStoryFetcher1.abandon();};h.prototype.hasNext=function(){'use strict';var i=this.$VideoChannelStoryFetcher5.length-this.$VideoChannelStoryFetcher9.end>0;return this.$VideoChannelStoryFetcher3||i;};h.prototype.$VideoChannelStoryFetcher14=function(event,i,j){'use strict';var k={};k[c('VideoChannelLoggerFields').EVENT]=event;k[c('VideoChannelLoggerFields').REQUEST_STATUS]=i;k[c('VideoChannelLoggerFields').PERF_TIME_MS]=Date.now()-j;c('VideoChannelLogger').log(k);};h.prototype.fetchFirstStory=function(i,j,k){'use strict';if(j===null)if(this.$VideoChannelStoryFetcher5.length!==0){var l=this.$VideoChannelStoryFetcher5.indexOf(this.$VideoChannelStoryFetcher7);j=this.$VideoChannelStoryFetcher6[l];}var m=c('XVideoChannelViewStoryAsyncController').getURIBuilder().setEnum('caller',this.$VideoChannelStoryFetcher4).setStringVector('video_ids',[this.$VideoChannelStoryFetcher7]).setString('root_video_id',this.$VideoChannelStoryFetcher7).setBool('is_first_story',true).setBool('use_video_placeholder',i).setBool('setup_interactions',k).setString('channel_id',this.$VideoChannelStoryFetcher8).setString('ad_impression_token',this.$VideoChannelStoryFetcher11);if(j)m.setStringVector('feed_tracking_data',[JSON.stringify(j)]);var n=Date.now(),o=new (c('AsyncRequest'))(m.getURI()).setAllowCrossPageTransition(true).setHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_FIRST_STORY,c('VideoChannelRequestStatus').SUCCEEDED,n);this.$VideoChannelStoryFetcher15();}.bind(this)).setErrorHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_FIRST_STORY,c('VideoChannelRequestStatus').FAILED,n);this.$VideoChannelStoryFetcher15();}.bind(this)).setAbortHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_FIRST_STORY,c('VideoChannelRequestStatus').ABORTED,n);this.$VideoChannelStoryFetcher15();}.bind(this));this.$VideoChannelStoryFetcher1=o;this.$VideoChannelStoryFetcher10=Date.now();o.send();};h.prototype.getPreloadedData=function(){'use strict';return {stories:this.$VideoChannelStoryFetcher12,thumbnails:this.$VideoChannelStoryFetcher13};};h.prototype.$VideoChannelStoryFetcher16=function(i,j){'use strict';if(!this.$VideoChannelStoryFetcher8)return;var k=c('XVideoChannelViewAsyncController').getURIBuilder().setString('id',this.$VideoChannelStoryFetcher8).setEnum('caller',this.$VideoChannelStoryFetcher4).setString('original_video_id',this.$VideoChannelStoryFetcher7).setInt('story_count',i);if(this.$VideoChannelStoryFetcher2)k.setString('cursor',this.$VideoChannelStoryFetcher2.toString());var l=Date.now(),m=k.getURI(),n=new (c('AsyncRequest'))(m).setAllowCrossPageTransition(true).setHandler(function(o){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FROM_ENTQUERY,c('VideoChannelRequestStatus').SUCCEEDED,l);this.$VideoChannelStoryFetcher2=o.getPayload().cursor;this.$VideoChannelStoryFetcher3=o.getPayload().hasNextPage;this.$VideoChannelStoryFetcher15();this.$VideoChannelStoryFetcher17(o,function(p,q){this.$VideoChannelStoryFetcher12=[].concat(this.$VideoChannelStoryFetcher12,p);this.$VideoChannelStoryFetcher13=[].concat(this.$VideoChannelStoryFetcher13,q);return j(p,q);}.bind(this));}.bind(this)).setErrorHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FROM_ENTQUERY,c('VideoChannelRequestStatus').FAILED,l);this.$VideoChannelStoryFetcher15();}.bind(this)).setAbortHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FROM_ENTQUERY,c('VideoChannelRequestStatus').ABORTED,l);this.$VideoChannelStoryFetcher15();}.bind(this));this.$VideoChannelStoryFetcher1=n;n.send();};h.prototype.$VideoChannelStoryFetcher18=function(i,j,k){var l,m=this;'use strict';var n=this.$VideoChannelStoryFetcher9.end,o=this.$VideoChannelStoryFetcher5.length-n,p=n+Math.min(o,i);if(o>0){(function(){var q=m.$VideoChannelStoryFetcher5.slice(n,p),r=m.$VideoChannelStoryFetcher6.slice(n,p).map(function(u){return JSON.stringify(u);}),s=c('XVideoChannelViewStoryAsyncController').getURIBuilder().setEnum('caller',m.$VideoChannelStoryFetcher4).setString('root_video_id',m.$VideoChannelStoryFetcher7).setStringVector('video_ids',q).setStringVector('feed_tracking_data',r),t=Date.now();m.$VideoChannelStoryFetcher1=new (c('AsyncRequest'))(s.getURI()).setAllowCrossPageTransition(true).setErrorHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FORWARD,c('VideoChannelRequestStatus').FAILED,t);this.$VideoChannelStoryFetcher15();}.bind(m)).setAbortHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FORWARD,c('VideoChannelRequestStatus').ABORTED,t);this.$VideoChannelStoryFetcher15();}.bind(m)).setHandler(function(u){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FORWARD,c('VideoChannelRequestStatus').SUCCEEDED,t);this.$VideoChannelStoryFetcher9.end=p;this.$VideoChannelStoryFetcher15();this.$VideoChannelStoryFetcher17(u,function(v,w){this.$VideoChannelStoryFetcher12=[].concat(this.$VideoChannelStoryFetcher12,v);this.$VideoChannelStoryFetcher13=[].concat(this.$VideoChannelStoryFetcher13,w);return j(v,w);}.bind(this));}.bind(m));m.$VideoChannelStoryFetcher1.send();if(k)k(o);})();}else if(this.$VideoChannelStoryFetcher3){this.$VideoChannelStoryFetcher16(i,j);if(k)k(i);}};h.prototype.$VideoChannelStoryFetcher19=function(i,j,k){var l,m=this;'use strict';var n=this.$VideoChannelStoryFetcher9.start;if(n>0)(function(){var o=Math.max(n-i,0),p=m.$VideoChannelStoryFetcher5.slice(o,n),q=m.$VideoChannelStoryFetcher6.slice(o,n).map(function(t){return JSON.stringify(t);}),r=c('XVideoChannelViewStoryAsyncController').getURIBuilder().setEnum('caller',m.$VideoChannelStoryFetcher4).setString('root_video_id',m.$VideoChannelStoryFetcher7).setStringVector('video_ids',p).setStringVector('feed_tracking_data',q),s=Date.now();m.$VideoChannelStoryFetcher1=new (c('AsyncRequest'))(r.getURI()).setAllowCrossPageTransition(true).setErrorHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_BACKWARD,c('VideoChannelRequestStatus').FAILED,s);this.$VideoChannelStoryFetcher15();}.bind(m)).setAbortHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_BACKWARD,c('VideoChannelRequestStatus').ABORTED,s);this.$VideoChannelStoryFetcher15();}.bind(m)).setHandler(function(t){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_BACKWARD,c('VideoChannelRequestStatus').SUCCEEDED,s);this.$VideoChannelStoryFetcher9.start=o;this.$VideoChannelStoryFetcher15();this.$VideoChannelStoryFetcher17(t,j);}.bind(m));m.$VideoChannelStoryFetcher1.send();if(k)k(n-o);})();};h.prototype.fetchStories=function(i,j,k){'use strict';var l=c('VideoChannelViewVariables').defaultStoriesToLoad;if(this.$VideoChannelStoryFetcher1)return;if(i){this.$VideoChannelStoryFetcher18(l,j,k);}else this.$VideoChannelStoryFetcher19(l,j,k);};h.prototype.$VideoChannelStoryFetcher17=function(i,j){'use strict';var k=i.getPayload(),l=c('HTML').replaceJSONWrapper(k.stories).getNodes(),m=k.thumbnails.map(function(n){return c('HTML').replaceJSONWrapper(n).getRootNode();});j(l,m);};h.prototype.$VideoChannelStoryFetcher15=function(){'use strict';this.$VideoChannelStoryFetcher1=null;};f.exports=h;}),null);
__d('VideoWatchAndScrollEndScreen.react',['ix','cx','Image.react','React','VideoChannelProgressCircle.react','VideoChannelReplayImage.react','fbglyph'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:"_5qdn"+(' '+"_2se8")+(this.props.fadeOut?' '+"_2gud":'')+(' '+"_1s-2")},c('React').createElement('div',{className:"_1szz _2se8"},c('React').createElement('div',{className:"_1szy _ww8",onClick:this.props.onReplay},c('React').createElement(c('VideoChannelProgressCircle.react'),{makeProgress:this.props.makeProgress,timeoutSec:this.props.endScreenDuration,watchAndScroll:true},c('React').createElement(c('VideoChannelReplayImage.react'),{size:'small'})))),c('React').createElement('div',{className:"_3r7h _2se8",onClick:this.props.onClose},c('React').createElement(c('Image.react'),{src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/cross_20_fig-white.png")}))));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={endScreenDuration:l.number.isRequired,fadeOut:l.bool,makeProgress:l.bool.isRequired,onReplay:l.func.isRequired,onClose:l.func.isRequired};f.exports=m;}),null);
__d('VideoWatchAndScrollContainer.react',['csx','cx','CSS','DOM','DOMContainer.react','DOMDimensions','Event','Parent','React','ReactCSSTransitionGroup','Rect','SubscriptionsHandler','VideoWatchAndScrollEndScreen.react','cancelAnimationFrame','getViewportDimensions','requestAnimationFrame','shallowCompare','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=10,n=230,o=476,p=300,q=3000,r={NW:'nw',NE:'ne',SE:'se',SW:'sw'};j=babelHelpers.inherits(s,c('React').Component);k=j&&j.prototype;function s(t,u){k.constructor.call(this,t,u);this.state=this.$VideoWatchAndScrollContainer2(this.props);}s.prototype.$VideoWatchAndScrollContainer2=function(t){var u=this.$VideoWatchAndScrollContainer3(),v=this.$VideoWatchAndScrollContainer4(this.props.initialPosition,u);return {channelVideoElements:[this.props.initialVideoElement],containerBoundingBox:u,dragging:false,draggingStartHeight:0,draggingStartLeft:0,draggingStartMousePositionX:0,draggingStartMousePositionY:0,draggingStartTop:0,draggingStartWidth:0,endScreenFadeOut:false,endScreenShown:false,fadeOut:false,fadeOutPlaceholder:null,height:v.height,left:v.left,overlayShown:false,resizeDirection:null,top:v.top,width:v.width,videoIndex:0};};s.prototype.shouldComponentUpdate=function(t,u){return !this.state.fadeOut&&c('shallowCompare')(this,t,u);};s.prototype.componentDidUpdate=function(t,u){if(!u)return;if(!u.dragging&&this.state.dragging){this.documentSubscriptions=new (c('SubscriptionsHandler'))();this.documentSubscriptions.addSubscriptions(c('Event').listen(document,'mousemove',this.$VideoWatchAndScrollContainer5.bind(this)),c('Event').listen(document,'mouseup',this.$VideoWatchAndScrollContainer6.bind(this)));}else if(u.dragging&&!this.state.dragging)this.documentSubscriptions.release();if(u.endScreenShown!==this.state.endScreenShown){if(this.state.endScreenShown){this.$VideoWatchAndScrollContainer1=setTimeout(function(){this.props.onChannelNavigation(1);this.setState({endScreenShown:false,endScreenFadeOut:true});}.bind(this),q);}else{clearTimeout(this.$VideoWatchAndScrollContainer1);this.$VideoWatchAndScrollContainer1=null;this.setState({endScreenFadeOut:false});}}else if(this.state.endScreenShown&&this.state.videoIndex>=u.channelVideoElements.length-1&&this.state.videoIndex<this.state.channelVideoElements.length-1){clearTimeout(this.$VideoWatchAndScrollContainer1);this.$VideoWatchAndScrollContainer1=setTimeout(function(){this.props.onChannelNavigation(1);this.setState({endScreenShown:false,endScreenFadeOut:true});}.bind(this),q);}var v=["._23if","._23ig","._452w"],w=u.channelVideoElements||[];this.state.channelVideoElements.forEach(function(x){if(w.indexOf(x)!==-1)return;v.forEach(function(y){var z=c('DOM').scry(x,y),aa=z[0];if(aa)c('CSS').hide(aa);});});};s.prototype.componentDidMount=function(){this.resizeListener=c('Event').listen(window,'resize',c('throttle')(function(){var t=this.$VideoWatchAndScrollContainer3(),u=this.$VideoWatchAndScrollContainer4({height:this.state.height,left:this.state.left,top:this.state.top,width:this.state.width},t);this.setState({containerBoundingBox:t,height:u.height,left:u.left,top:u.top,width:u.width});}.bind(this),100));};s.prototype.componentWillUnmount=function(){if(this.documentSubscriptions)this.documentSubscriptions.release();if(this.resizeListener)this.resizeListener.remove();this.$VideoWatchAndScrollContainer1&&clearTimeout(this.$VideoWatchAndScrollContainer1);};s.prototype.getFadeOutStatus=function(){return this.state.fadeOut;};s.prototype.getChannelVideoElements=function(){return this.state.channelVideoElements;};s.prototype.$VideoWatchAndScrollContainer7=function(t,event){this.$VideoWatchAndScrollContainer8(event,t);};s.prototype.$VideoWatchAndScrollContainer9=function(event){if(!c('Parent').bySelector(event.target,"._3t-6"))return;this.$VideoWatchAndScrollContainer8(event,null);};s.prototype.$VideoWatchAndScrollContainer10=function(event){return event.button!==0||c('Parent').bySelector(event.target,"._3t-6")||c('Parent').bySelector(event.target,"._2se8");};s.prototype.$VideoWatchAndScrollContainer11=function(event){if(this.$VideoWatchAndScrollContainer10(event))return;this.props.onClick&&this.props.onClick();};s.prototype.$VideoWatchAndScrollContainer12=function(event){if(this.$VideoWatchAndScrollContainer10(event))return;this.props.onDoubleClick&&this.props.onDoubleClick();};s.prototype.$VideoWatchAndScrollContainer8=function(event,t){if(event.button!==0)return;if(c('Parent').bySelector(event.target,"._360f"))return;this.props.onGrab();this.setState({containerBoundingBox:this.$VideoWatchAndScrollContainer3(),dragging:true,draggingStartHeight:this.state.height,draggingStartLeft:this.state.left,draggingStartMousePositionX:event.screenX,draggingStartMousePositionY:event.screenY,draggingStartTop:this.state.top,draggingStartWidth:this.state.width,resizeDirection:t});event.preventDefault();};s.prototype.$VideoWatchAndScrollContainer3=function(){var t=0,u=c('DOM').scry(document.body,".fbChatSidebar");if(u.length===1)t=c('DOMDimensions').getElementDimensions(u[0]).width;var v=c('getViewportDimensions').withoutScrollbars(),w=new (c('Rect'))(43+m,v.width-t-m,v.height-m,m);return w;};s.prototype.$VideoWatchAndScrollContainer4=function(t,u){var v=new (c('Rect'))(t.top,t.left+t.width,t.top+t.height,t.left);v=v.boundWithin(u);return {height:v.h(),left:v.getLeft(),top:v.getTop(),width:v.w()};};s.prototype.$VideoWatchAndScrollContainer13=function(t,u,v){var w=t.top,x=u.getTop(),y=x-w;if(y>0){if(v===r.NE||v===r.NW)t.height-=y;t.top=x;}var z=t.left,aa=u.getLeft(),ba=aa-z;if(ba>0){if(v===r.NW||v===r.SW)t.width-=ba;t.left=aa;}var ca=t.top+t.height,da=u.getTop()+u.h(),ea=ca-da;if(ea>0)t.height=da-t.top;var fa=t.left+t.width,ga=u.getLeft()+u.w(),ha=fa-ga;if(ha>0)t.width=ga-t.left;};s.prototype.$VideoWatchAndScrollContainer14=function(t,u,v){if(t.width<n){if(v===r.NW||v===r.SW)t.left-=n-t.width;t.width=n;}if(t.height<n){if(v===r.NE||v===r.NW)t.top-=n-t.height;t.height=n;}};s.prototype.$VideoWatchAndScrollContainer15=function(t,u,v){if(t.width>o){if(v===r.NW||v===r.SW)t.left+=t.width-o;t.width=o;}if(t.height>o){if(v===r.NE||v===r.NW)t.top+=t.height-o;t.height=o;}};s.prototype.$VideoWatchAndScrollContainer16=function(t,u,v){var w=t.width/t.height,x=u.width/u.height;if(w>x){var y=t.height*x,z=t.height;if(y<n){z*=n/y;y=n;if(v===r.NE||v===r.NW)t.top+=t.height-z;}if(v===r.NW||v===r.SW)t.left+=t.width-y;t.width=y;t.height=z;}else if(w<x){var aa=t.width/x;if(v===r.NE||v===r.NW)t.top+=t.height-aa;t.height=aa;}};s.prototype.$VideoWatchAndScrollContainer17=function(t,u,v,w){this.$VideoWatchAndScrollContainer13(t,v,w);this.$VideoWatchAndScrollContainer14(t,u,w);this.$VideoWatchAndScrollContainer15(t,u,w);this.$VideoWatchAndScrollContainer16(t,u,w);return {height:t.height,left:t.left,top:t.top,width:t.width};};s.prototype.$VideoWatchAndScrollContainer5=function(event){c('cancelAnimationFrame')(this.dragUpdateRequestAnimationFrameID);this.dragUpdateRequestAnimationFrameID=c('requestAnimationFrame')(this.$VideoWatchAndScrollContainer18.bind(this,event));};s.prototype.$VideoWatchAndScrollContainer19=function(t){if(t.height!==this.state.height||t.width!==this.state.width)this.props.onInitialPositionUpdate(t);};s.prototype.$VideoWatchAndScrollContainer18=function(event){if(!this.state.dragging)return;var t=event.screenX-this.state.draggingStartMousePositionX,u=event.screenY-this.state.draggingStartMousePositionY,v=this.state.resizeDirection,w=void 0;if(!v){w=this.$VideoWatchAndScrollContainer4({height:this.state.draggingStartHeight,left:this.state.draggingStartLeft+t,top:this.state.draggingStartTop+u,width:this.state.draggingStartWidth},this.state.containerBoundingBox);this.$VideoWatchAndScrollContainer19(w);this.setState({height:w.height,left:w.left,top:w.top,width:w.width});}else{var x=this.state.draggingStartHeight,y=this.state.draggingStartLeft,z=this.state.draggingStartTop,aa=this.state.draggingStartWidth;if(v===r.NE||v===r.SE)aa+=t;if(v===r.NW||v===r.SW){y+=t;aa-=t;}if(v===r.SE||v===r.SW)x+=u;if(v===r.NE||v===r.NW){z+=u;x-=u;}w=this.$VideoWatchAndScrollContainer17({height:x,left:y,top:z,width:aa},{height:this.state.draggingStartHeight,left:this.state.draggingStartLeft,top:this.state.draggingStartTop,width:this.state.draggingStartWidth},this.state.containerBoundingBox,v);this.$VideoWatchAndScrollContainer19(w);this.setState({height:w.height,left:w.left,top:w.top,width:w.width});}event.preventDefault();};s.prototype.$VideoWatchAndScrollContainer6=function(event){c('cancelAnimationFrame')(this.dragUpdateRequestAnimationFrameID);this.props.onDrop();this.setState({dragging:false,draggingStartHeight:0,draggingStartLeft:0,draggingStartMousePositionX:0,draggingStartMousePositionY:0,draggingStartTop:0,draggingStartWidth:0,resizeDirection:null});event.preventDefault();};s.prototype.$VideoWatchAndScrollContainer20=function(t,u){if(t>this.state.channelVideoElements.length)return null;var v=this.state.channelVideoElements[t];if(!v)return null;return (c('React').createElement('div',{className:"_2yq3"+(u==='left'?' '+"_2yq4":'')+(u==='center'?' '+"_2yq5":'')+(u==='right'?' '+"_2yq6":''),key:v.id},c('React').createElement(c('DOMContainer.react'),null,v)));};s.prototype.getWidth=function(){return this.state.width;};s.prototype.render=function(){var t={height:Math.round(this.state.height)+'px',left:this.state.left+'px',top:this.state.top+'px',width:Math.round(this.state.width)+'px'},u=this.state.channelVideoElements,v=u[this.state.videoIndex];if(v){c('CSS').addClass(v,"_1kfp");c('CSS').conditionClass(v,"_1blk",this.state.width<p);}var w=null;if(this.state.endScreenShown)w=c('React').createElement(c('VideoWatchAndScrollEndScreen.react'),{endScreenDuration:q/1000,fadeOut:this.state.endScreenFadeOut,makeProgress:this.state.videoIndex<u.length-1,onReplay:this.props.onReplay,onClose:function(){clearTimeout(this.$VideoWatchAndScrollContainer1);this.$VideoWatchAndScrollContainer1=null;this.props.onClose();}.bind(this)});var x=null;if(this.state.fadeOutPlaceholder){x=c('React').createElement(c('DOMContainer.react'),null,this.state.fadeOutPlaceholder);}else x=c('React').createElement('ul',{className:"_2yq7"},u.map(function(y,z){if(z>this.state.videoIndex+1||z<this.state.videoIndex-1)c('CSS').removeClass(y,"_1kfp");if(z<=this.state.videoIndex+1)return null;return (c('React').createElement('li',{key:y.id},c('React').createElement(c('DOMContainer.react'),null,y)));}.bind(this)));return (c('React').createElement(c('ReactCSSTransitionGroup'),{transitionAppear:true,transitionAppearTimeout:500,transitionEnter:false,transitionLeave:false,transitionName:{appear:"_tie",appearActive:"_tik"}},c('React').createElement('div',{className:"_360g"+(this.state.fadeOut?' '+"_473b":''),style:t},w,c('React').createElement('div',{className:"_52u8",onMouseDown:this.$VideoWatchAndScrollContainer9.bind(this),onClick:this.$VideoWatchAndScrollContainer11.bind(this),onDoubleClick:this.$VideoWatchAndScrollContainer12.bind(this)},this.$VideoWatchAndScrollContainer20(this.state.videoIndex-1,'left'),this.$VideoWatchAndScrollContainer20(this.state.videoIndex,'center'),this.$VideoWatchAndScrollContainer20(this.state.videoIndex+1,'right')),c('React').createElement('div',{className:"_52ua",onMouseDown:this.$VideoWatchAndScrollContainer7.bind(this,r.NW)}),c('React').createElement('div',{className:"_52uc",onMouseDown:this.$VideoWatchAndScrollContainer7.bind(this,r.NE)}),c('React').createElement('div',{className:"_52ui",onMouseDown:this.$VideoWatchAndScrollContainer7.bind(this,r.SE)}),c('React').createElement('div',{className:"_52uj",onMouseDown:this.$VideoWatchAndScrollContainer7.bind(this,r.SW)}),x)));};s.propTypes={initialPosition:l.object.isRequired,initialVideoElement:l.instanceOf(HTMLElement).isRequired,onChannelNavigation:l.func.isRequired,onClick:l.func.isRequired,onClose:l.func.isRequired,onDoubleClick:l.func.isRequired,onDrop:l.func.isRequired,onGrab:l.func.isRequired,onInitialPositionUpdate:l.func.isRequired,onReplay:l.func.isRequired};f.exports=s;}),null);
__d("XVideoWNSSurveyController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/wns_survey\/",{__asyncDialog:{type:"Int"}});}),null);
__d('VideoWatchAndScrollController',['csx','cx','invariant','Arbiter','AsyncRequest','Bootloader','CSS','DOM','DOMDimensions','EventListener','React','ReactDOM','SubscriptionsHandler','VideoAutoplayControllerX','VideoChainingCaller','VideoChannelLogger','VideoChannelStoryFetcher','VideoFrameBuffer','VideoPlayerLoggerEvent','VideoPlayerReason','VideoPlayerVolumeSettings','VideoWatchAndScrollContainer.react','VideoWatchAndScrollVariables','XVideoWNSSurveyController','cancelAnimationFrame','destroyOnUnload','throttle'],(function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=158,l=280,m=10,n=42,o=n+m,p=476,q=230,r=[c('VideoPlayerReason').AUTOPLAY,c('VideoPlayerReason').PAGE_VISIBILITY],s=750,t=null;function u(v,w,x,y){'use strict';this.$VideoWatchAndScrollController30=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController31=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController1=false;this.$VideoWatchAndScrollController2=null;this.$VideoWatchAndScrollController3=null;this.$VideoWatchAndScrollController4=false;this.$VideoWatchAndScrollController34=x;this.$VideoWatchAndScrollController37=false;this.$VideoWatchAndScrollController29=false;this.$VideoWatchAndScrollController47=y;this.$VideoWatchAndScrollController48=y;this.$VideoWatchAndScrollController33=new (c('VideoChannelStoryFetcher'))(w,v,this.$VideoWatchAndScrollController34,null);this.$VideoWatchAndScrollController35=[];this.$VideoWatchAndScrollController36=0;this.$VideoWatchAndScrollController38=[];this.$VideoWatchAndScrollController39=[];this.$VideoWatchAndScrollController5=k;this.$VideoWatchAndScrollController6=l;this.$VideoWatchAndScrollController10=window.document.getElementById('leftCol');this.$VideoWatchAndScrollController11=window.document.getElementById('rightCol');this.$VideoWatchAndScrollController12=window.document.getElementById('pagelet_bluebar');this.$VideoWatchAndScrollController43={};this.$VideoWatchAndScrollController46=null;this.$VideoWatchAndScrollController49();this.$VideoWatchAndScrollController30.addSubscriptions(c('Arbiter').subscribe('VideoChannelView/opened',function(z,aa){if(this.$VideoWatchAndScrollController4&&(!aa.controller||this.$VideoWatchAndScrollController16!==aa.controller))this.$VideoWatchAndScrollController50(true);}.bind(this)));c('destroyOnUnload')(function(){this.$VideoWatchAndScrollController51();if(this.$VideoWatchAndScrollController4)this.$VideoWatchAndScrollController50(true);if(this.$VideoWatchAndScrollController30)this.$VideoWatchAndScrollController30.release();if(this===t)t=null;}.bind(this));}u.prototype.$VideoWatchAndScrollController52=function(v,w,x){'use strict';!v?j(0):void 0;!w.length?j(0):void 0;this.$VideoWatchAndScrollController47=true;this.$VideoWatchAndScrollController37=false;this.$VideoWatchAndScrollController31=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController36=x;this.$VideoWatchAndScrollController33=v;this.$VideoWatchAndScrollController38=v.getPreloadedData().thumbnails||[];this.$VideoWatchAndScrollController39=[];this.$VideoWatchAndScrollController35=w.slice(0);this.$VideoWatchAndScrollController35.forEach(function(z){this.$VideoWatchAndScrollController53(z);this.$VideoWatchAndScrollController54(z);z.setIsInChannel(false);}.bind(this));var y=this.$VideoWatchAndScrollController35.shift();this.$VideoWatchAndScrollController55(y,c('VideoPlayerReason').USER);};u.prototype.$VideoWatchAndScrollController56=function(v,w,x,y,z){'use strict';this.$VideoWatchAndScrollController9=z;this.$VideoWatchAndScrollController46=this.$VideoWatchAndScrollController57(z.videoRootNode);this.$VideoWatchAndScrollController52(v,w,x);if(this.$VideoWatchAndScrollController14)this.$VideoWatchAndScrollController14.setState({channelVideoElements:y},function(){this.$VideoWatchAndScrollController58();}.bind(this));this.$VideoWatchAndScrollController9=null;};u.registerVideoController=function(v,w,x,y){'use strict';if(t==null)t=new u(v.getVideoChannelID(),v.getVideoID(),w,y);t.$VideoWatchAndScrollController30.addSubscriptions(v.addListener('enterWatchAndScroll',function(){if(t)t.$VideoWatchAndScrollController59(v);}),v.addListener('exitWatchAndScroll',function(){if(t&&t.$VideoWatchAndScrollController4)t.$VideoWatchAndScrollController50(true);}),v.addListener('VideoChannelController/enterChannel',function(){if(t)t.$VideoWatchAndScrollController37=true;}),v.addListener('VideoChannelController/exitChannel',function(){if(t)t.$VideoWatchAndScrollController37=false;}),v.addListener('WatchAndScroll/close',function(){if(t){t.$VideoWatchAndScrollController60();var aa=c('XVideoWNSSurveyController').getURIBuilder().getURI(),ba=new (c('AsyncRequest'))().setURI(aa);ba.send();}}));if(!x)return;var z=['beginPlayback','changeVolume','muteVideo','toggleFullscreen','unmuteVideo','VideoChannelController/enterChannel'];z.forEach(function(event){if(t)t.$VideoWatchAndScrollController30.addSubscriptions(v.addListener(event,function(aa){if(t)t.$VideoWatchAndScrollController61(v,event,aa);}));});};u.isActive=function(){'use strict';if(!t)return false;return t.$VideoWatchAndScrollController4&&!t.$VideoWatchAndScrollController37;};u.updateSlidingCalculations=function(){'use strict';if(!t)return;if(t.$VideoWatchAndScrollController19)t.$VideoWatchAndScrollController62(t.$VideoWatchAndScrollController19);};u.registerChannelVideoController=function(v){'use strict';if(!t)return;v.setIsInChannel(false);t.$VideoWatchAndScrollController53(v);t.$VideoWatchAndScrollController54(v);t.$VideoWatchAndScrollController35.push(v);};u.getStoryFetcherData=function(){'use strict';return t&&t.$VideoWatchAndScrollController63();};u.prototype.$VideoWatchAndScrollController63=function(){'use strict';return {storyFetcher:this.$VideoWatchAndScrollController33,videoPlayerControllers:this.$VideoWatchAndScrollController35,channelVideoIndex:this.$VideoWatchAndScrollController36,rootVideoPlayerController:this.$VideoWatchAndScrollController17,channelInteractionsToRegister:this.$VideoWatchAndScrollController39,isFromWNS:true};};u.getVideoPlaceholder=function(){'use strict';if(!t)return null;return t.$VideoWatchAndScrollController18;};u.getReactContainer=function(){'use strict';if(!t)return null;return t.$VideoWatchAndScrollController14;};u.registerChannelInteraction=function(v){'use strict';if(t)t.$VideoWatchAndScrollController39.push(v);};u.onEnterChannel=function(){'use strict';if(!t)return;t.$VideoWatchAndScrollController64();};u.prototype.$VideoWatchAndScrollController64=function(){'use strict';this.$VideoWatchAndScrollController37=true;this.$VideoWatchAndScrollController33.abandonRequest();var v=this.$VideoWatchAndScrollController14;if(!v)return;var w=["._23if","._23ig","._452w"];v.getChannelVideoElements().forEach(function(x){w.forEach(function(y){var z=c('DOM').scry(x,y),aa=z[0];if(aa)c('CSS').show(aa);});});};u.resetFromChannelView=function(v,w,x){'use strict';if(!t)return;t.$VideoWatchAndScrollController52(v,w,x);};u.startFromChannelView=function(v,w,x,y,z){'use strict';if(!t)return;t.$VideoWatchAndScrollController56(v,w,x,y,z);};u.prototype.$VideoWatchAndScrollController61=function(v,event,w){'use strict';if(this.$VideoWatchAndScrollController4){if(this.$VideoWatchAndScrollController16===v)return;if(w&&r.includes(w.reason))return;if(!v.isIntentionallyViewing())return;var x=this.$VideoWatchAndScrollController16.getOption('VideoWithLiveBroadcast','isLive');if(x){this.$VideoWatchAndScrollController16.mute();}else this.$VideoWatchAndScrollController16.pause(c('VideoPlayerReason').USER);}if(event==='toggleFullscreen'&&v.isFullscreen()||event==='VideoChannelController/enterChannel'){if(this.$VideoWatchAndScrollController19)this.$VideoWatchAndScrollController51();}else if((event!=='beginPlayback'||w&&w.reason===c('VideoPlayerReason').USER)&&v.isIntentionallyViewing()&&!v.isFullscreen()&&!v.getIsInChannel())this.$VideoWatchAndScrollController62(v);};u.prototype.$VideoWatchAndScrollController65=function(v){'use strict';if(this.$VideoWatchAndScrollController37||v!==this.$VideoWatchAndScrollController16)return;if(this.$VideoWatchAndScrollController14)this.$VideoWatchAndScrollController14.setState({endScreenShown:true});};u.prototype.$VideoWatchAndScrollController66=function(v){'use strict';var w=v.getOption('VideoWithInstreamVideo','controller');if(w)return w.addListener('finishPlayback',function(){return this.$VideoWatchAndScrollController65(v);}.bind(this));return v.addListener('finishPlayback',function(){return this.$VideoWatchAndScrollController65(v);}.bind(this));};u.prototype.$VideoWatchAndScrollController62=function(v){'use strict';var w=v.getVideoNode();if(!w.offsetParent)return;this.$VideoWatchAndScrollController19=v;this.$VideoWatchAndScrollController25=c('throttle')(this.$VideoWatchAndScrollController67.bind(this),100);window.addEventListener('resize',this.$VideoWatchAndScrollController25);this.$VideoWatchAndScrollController68(w);this.$VideoWatchAndScrollController69();};u.prototype.$VideoWatchAndScrollController67=function(){'use strict';if(this.$VideoWatchAndScrollController19){this.$VideoWatchAndScrollController68(this.$VideoWatchAndScrollController18||this.$VideoWatchAndScrollController19.getVideoNode());this.$VideoWatchAndScrollController26();}};u.prototype.$VideoWatchAndScrollController70=function(v){'use strict';var w=this.$VideoWatchAndScrollController71(v),x=v.scrollWidth,y=v.scrollHeight,z=q,aa=p;if(x<y){z*=x/y;aa*=x/y;}var ba=z;if(this.$VideoWatchAndScrollController10&&this.$VideoWatchAndScrollController10.children.length){var ca=this.$VideoWatchAndScrollController71(this.$VideoWatchAndScrollController10);if(ca.left<=w.left){ba=Math.min(ca.left-2*m,aa);}else if(this.$VideoWatchAndScrollController11&&this.$VideoWatchAndScrollController11.children.length){var da=this.$VideoWatchAndScrollController71(this.$VideoWatchAndScrollController11);ba=Math.min(da.left-2*m,aa);}}else{var ea=document.getElementById('timeline_tab_content');if(ea){var fa=this.$VideoWatchAndScrollController71(ea).left;ba=Math.min(fa-2*m,aa);}}return Math.max(ba,z);};u.prototype.$VideoWatchAndScrollController71=function(v){'use strict';var w={left:0,top:0};do{w.top+=v.offsetTop;w.left+=v.offsetLeft;}while(v=v.offsetParent);return w;};u.prototype.$VideoWatchAndScrollController57=function(v){'use strict';var w=!v&&this.$VideoWatchAndScrollController9,x={left:0},y=16,z=9;if(!w){x=this.$VideoWatchAndScrollController71(v);z=1;y=parseFloat(v.getAttribute('data-original-aspect-ratio'));var aa=v.parentElement;if((!y||z===0)&&aa){x=this.$VideoWatchAndScrollController71(aa);y=aa.scrollWidth;z=aa.scrollHeight;}}var ba=q,ca=p;if(y<z){ba*=y/z;ca*=y/z;}var da=0;if(this.$VideoWatchAndScrollController10&&this.$VideoWatchAndScrollController10.children.length){var ea=this.$VideoWatchAndScrollController71(this.$VideoWatchAndScrollController10),fa=window.getComputedStyle(this.$VideoWatchAndScrollController10),ga=parseInt(fa.width,10);if(w||ea.left<=x.left){da=ga+ea.left-m;}else if(this.$VideoWatchAndScrollController11&&this.$VideoWatchAndScrollController11.children.length){var ha=this.$VideoWatchAndScrollController71(this.$VideoWatchAndScrollController11),ia=window.getComputedStyle(this.$VideoWatchAndScrollController11),ja=parseInt(ia.width,10);da=ja+ha.left-m;}}else{var ka=document.getElementById('timeline_tab_content');if(!ka){var la=document.getElementById('pagelet_timeline_main_column');if(la)ka=la.parentNode;}if(ka){var ma=this.$VideoWatchAndScrollController71(ka).left;da=ma-2*m;}}var na=m;if(this.$VideoWatchAndScrollController12)na+=this.$VideoWatchAndScrollController12.scrollHeight;na=Math.max(na,o);var oa=da>ca?da-ca+m:m;oa=Math.max(oa,m);var pa=Math.min(da,ca);pa=Math.max(pa,q);var qa=pa*z/y;return {hasEnoughSpace:!!w||da>=ba,height:qa,left:oa,top:na,width:pa};};u.prototype.$VideoWatchAndScrollController68=function(v){'use strict';this.$VideoWatchAndScrollController21=this.$VideoWatchAndScrollController71(v);this.$VideoWatchAndScrollController27=v.scrollWidth;this.$VideoWatchAndScrollController28=v.scrollHeight;var w=Math.max(this.$VideoWatchAndScrollController27,this.$VideoWatchAndScrollController28);if(w<q){var x=q/w;this.$VideoWatchAndScrollController27*=x;this.$VideoWatchAndScrollController28*=x;}this.$VideoWatchAndScrollController20=this.$VideoWatchAndScrollController21.top+this.$VideoWatchAndScrollController28*.75-n;this.$VideoWatchAndScrollController46=this.$VideoWatchAndScrollController57(v);this.$VideoWatchAndScrollController29=!this.$VideoWatchAndScrollController46.hasEnoughSpace;};u.prototype.$VideoWatchAndScrollController69=function(){'use strict';if(this.$VideoWatchAndScrollController19.isIntentionallyViewing()){this.$VideoWatchAndScrollController72(this.$VideoWatchAndScrollController73.bind(this));this.$VideoWatchAndScrollController73();}else this.$VideoWatchAndScrollController51();};u.prototype.$VideoWatchAndScrollController73=function(){'use strict';var v=this.$VideoWatchAndScrollController19&&this.$VideoWatchAndScrollController19.isIntentionallyViewing(),w=this.$VideoWatchAndScrollController19&&!this.$VideoWatchAndScrollController19.getVideoNode().offsetParent;if(!this.$VideoWatchAndScrollController19||!v||w){this.$VideoWatchAndScrollController51();return;}if(window.scrollY>this.$VideoWatchAndScrollController20){var x=false,y=false;if(this.$VideoWatchAndScrollController19){var z=this.$VideoWatchAndScrollController19.getPlaybackDuration(),aa=this.$VideoWatchAndScrollController19.getCurrentTimePosition(),ba=c('VideoWatchAndScrollVariables').noWNSRemainingTime;if(z*.2<ba){x=aa/z>.8;}else x=z-aa<ba;y=this.$VideoWatchAndScrollController19.hasLooped();}if(this.$VideoWatchAndScrollController29||x||y){this.$VideoWatchAndScrollController51();return;}this.$VideoWatchAndScrollController74();this.$VideoWatchAndScrollController55(this.$VideoWatchAndScrollController19,c('VideoPlayerReason').AUTOPLAY,false,true);this.$VideoWatchAndScrollController51();}};u.prototype.$VideoWatchAndScrollController74=function(){'use strict';this.$VideoWatchAndScrollController47=this.$VideoWatchAndScrollController48;};u.prototype.$VideoWatchAndScrollController72=function(v){'use strict';window.removeEventListener('scroll',this.$VideoWatchAndScrollController26);this.$VideoWatchAndScrollController26=v||null;window.addEventListener('scroll',this.$VideoWatchAndScrollController26);c('cancelAnimationFrame')(this.$VideoWatchAndScrollController32);delete this.$VideoWatchAndScrollController32;};u.prototype.$VideoWatchAndScrollController51=function(){'use strict';window.removeEventListener('resize',this.$VideoWatchAndScrollController25);this.$VideoWatchAndScrollController72();delete this.$VideoWatchAndScrollController19;this.$VideoWatchAndScrollController29=false;};u.prototype.$VideoWatchAndScrollController59=function(v){'use strict';this.$VideoWatchAndScrollController51();if(this.$VideoWatchAndScrollController4&&this.$VideoWatchAndScrollController16!==v){this.$VideoWatchAndScrollController22=v;this.$VideoWatchAndScrollController75();}else{this.$VideoWatchAndScrollController46=this.$VideoWatchAndScrollController57(v.getVideoNode());this.$VideoWatchAndScrollController74();this.$VideoWatchAndScrollController55(v,c('VideoPlayerReason').USER);}};u.prototype.$VideoWatchAndScrollController55=function(v,w,x,y){'use strict';var z=!!this.$VideoWatchAndScrollController45;if(this.$VideoWatchAndScrollController45){clearTimeout(this.$VideoWatchAndScrollController45);this.$VideoWatchAndScrollController45=null;c('ReactDOM').unmountComponentAtNode(this.$VideoWatchAndScrollController76());this.$VideoWatchAndScrollController50();}var aa=this.$VideoWatchAndScrollController1&&(x||y)&&!!this.$VideoWatchAndScrollController17;if(aa){this.$VideoWatchAndScrollController36=0;this.$VideoWatchAndScrollController35=[];this.$VideoWatchAndScrollController38=[];this.$VideoWatchAndScrollController41=this.$VideoWatchAndScrollController17;this.$VideoWatchAndScrollController43=babelHelpers['extends']({},this.$VideoWatchAndScrollController8);this.$VideoWatchAndScrollController44=this.$VideoWatchAndScrollController18;this.$VideoWatchAndScrollController40=this.$VideoWatchAndScrollController14;this.$VideoWatchAndScrollController42=this.$VideoWatchAndScrollController2;this.$VideoWatchAndScrollController2=null;this.$VideoWatchAndScrollController13&&this.$VideoWatchAndScrollController13.remove();this.$VideoWatchAndScrollController31.release();this.$VideoWatchAndScrollController31=new (c('SubscriptionsHandler'))();}this.$VideoWatchAndScrollController17=v;this.$VideoWatchAndScrollController16=this.$VideoWatchAndScrollController14&&this.$VideoWatchAndScrollController36>0?this.$VideoWatchAndScrollController77(this.$VideoWatchAndScrollController36):v;if(this.$VideoWatchAndScrollController14&&this.$VideoWatchAndScrollController35.length>this.$VideoWatchAndScrollController36)this.$VideoWatchAndScrollController77(this.$VideoWatchAndScrollController36+1).preload();this.$VideoWatchAndScrollController15=this.$VideoWatchAndScrollController16.getRootNode();var ba=!this.$VideoWatchAndScrollController1||!this.$VideoWatchAndScrollController16.isMuted(),ca=!this.$VideoWatchAndScrollController1||this.$VideoWatchAndScrollController16.isState('playing'),da=this.$VideoWatchAndScrollController1&&this.$VideoWatchAndScrollController16.isState('finished');if(!this.$VideoWatchAndScrollController1||aa){if(!this.$VideoWatchAndScrollController9)c('VideoChannelLogger').startSession(this.$VideoWatchAndScrollController17.getVideoID(),this.$VideoWatchAndScrollController17.getVideoChannelID(),this.$VideoWatchAndScrollController34);if(!x||z){if(z)this.$VideoWatchAndScrollController46=this.$VideoWatchAndScrollController57(this.$VideoWatchAndScrollController15);this.$VideoWatchAndScrollController49(this.$VideoWatchAndScrollController15);}if(this.$VideoWatchAndScrollController9){this.$VideoWatchAndScrollController8=this.$VideoWatchAndScrollController9;if(this.$VideoWatchAndScrollController8.videoRootNode){this.$VideoWatchAndScrollController18=this.$VideoWatchAndScrollController78(this.$VideoWatchAndScrollController8.dimensions,this.$VideoWatchAndScrollController17.getVideoNode());c('DOM').appendContent(this.$VideoWatchAndScrollController8.videoRootNode,this.$VideoWatchAndScrollController18);var ea=c('DOM').scry(this.$VideoWatchAndScrollController8.videoRootNode,"._344x"),fa=ea[0];if(fa)c('DOM').remove(fa);}}else{this.$VideoWatchAndScrollController8={videoRootNode:this.$VideoWatchAndScrollController15.parentNode,dimensions:c('DOMDimensions').getElementDimensions(this.$VideoWatchAndScrollController15)};this.$VideoWatchAndScrollController18=this.$VideoWatchAndScrollController78(this.$VideoWatchAndScrollController8.dimensions,this.$VideoWatchAndScrollController16.getVideoNode());c('DOM').insertAfter(this.$VideoWatchAndScrollController15,this.$VideoWatchAndScrollController18);}var ga=null;if(this.$VideoWatchAndScrollController9)ga=this.$VideoWatchAndScrollController9.videoRootNode;if(!ga&&this.$VideoWatchAndScrollController15)ga=this.$VideoWatchAndScrollController15.parentNode;if(ga)this.$VideoWatchAndScrollController13=c('EventListener').listen(ga,'click',function(){this.$VideoWatchAndScrollController60();v.play(c('VideoPlayerReason').USER);setTimeout(function(){this.$VideoWatchAndScrollController61(v,'beginPlayback',{reason:c('VideoPlayerReason').USER});}.bind(this),s);}.bind(this));this.$VideoWatchAndScrollController16.pause(c('VideoPlayerReason').USER);if(this.$VideoWatchAndScrollController16.isPlayerVersion('silvercity'))this.$VideoWatchAndScrollController16.detachRootNode();var ha=this.$VideoWatchAndScrollController7?this.$VideoWatchAndScrollController7.width:this.$VideoWatchAndScrollController6,ia=this.$VideoWatchAndScrollController7?this.$VideoWatchAndScrollController7.height:this.$VideoWatchAndScrollController5;this.$VideoWatchAndScrollController16.setDimensions(ha,ia);this.$VideoWatchAndScrollController4=true;if(aa)this.$VideoWatchAndScrollController79();this.$VideoWatchAndScrollController14=this.$VideoWatchAndScrollController80();}else{this.$VideoWatchAndScrollController16.pause(c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController58();}ca&&this.$VideoWatchAndScrollController16.play(w);if(ba){this.$VideoWatchAndScrollController16.unmute();if(this.$VideoWatchAndScrollController16.getVolume()===0){var ja=c('VideoPlayerVolumeSettings').getLastVolumeBeforeMute()||1;this.$VideoWatchAndScrollController16.setVolume(ja);this.$VideoWatchAndScrollController16.emit('unmuteVideo');}}if(da)this.$VideoWatchAndScrollController65(this.$VideoWatchAndScrollController16);this.$VideoWatchAndScrollController16.logEvent(c('VideoPlayerLoggerEvent').PLAYER_FORMAT_CHANGED,{player_format:'watch_scroll'});var ka=this.$VideoWatchAndScrollController33;if((!this.$VideoWatchAndScrollController1||aa)&&ka){ka.abandonRequest();if(!this.$VideoWatchAndScrollController9)ka.reset(v.getVideoID(),v.getVideoChannelID());this.$VideoWatchAndScrollController81();this.$VideoWatchAndScrollController53(v);this.$VideoWatchAndScrollController54(v);}this.$VideoWatchAndScrollController1=true;};u.prototype.$VideoWatchAndScrollController53=function(v){'use strict';if(!v.hasOption('WatchAndScroll','isActive'))v.registerOption('WatchAndScroll','isActive',u.isActive);};u.prototype.$VideoWatchAndScrollController54=function(v){'use strict';this.$VideoWatchAndScrollController31.addSubscriptions(this.$VideoWatchAndScrollController66(v),v.addListener('VideoChannelController/enterChannel',function(){this.$VideoWatchAndScrollController31.release();}.bind(this)),v.addListener('WatchAndScroll/close',function(){this.$VideoWatchAndScrollController60();var w=c('XVideoWNSSurveyController').getURIBuilder().getURI(),x=new (c('AsyncRequest'))().setURI(w);x.send();}.bind(this)));};u.prototype.$VideoWatchAndScrollController82=function(){'use strict';if(!this.$VideoWatchAndScrollController14)return;this.$VideoWatchAndScrollController14.setState({endScreenShown:false});if(this.$VideoWatchAndScrollController16)this.$VideoWatchAndScrollController16.play(c('VideoPlayerReason').USER);};u.prototype.$VideoWatchAndScrollController81=function(){'use strict';if(!this.$VideoWatchAndScrollController47)return;this.$VideoWatchAndScrollController33.fetchStories(true,function(v,w){var x=this.$VideoWatchAndScrollController14;if(!v||!v.length||!x)return;var y=x.getChannelVideoElements().concat(v);x.setState({channelVideoElements:y},function(){setTimeout(function(){this.$VideoWatchAndScrollController77(this.$VideoWatchAndScrollController36+1).preload();}.bind(this));}.bind(this));this.$VideoWatchAndScrollController38=this.$VideoWatchAndScrollController38.concat(w);}.bind(this));};u.prototype.$VideoWatchAndScrollController77=function(v){'use strict';var w=this.$VideoWatchAndScrollController14?this.$VideoWatchAndScrollController14.getChannelVideoElements():[],x=[this.$VideoWatchAndScrollController17].concat(this.$VideoWatchAndScrollController35),y=null;x.forEach(function(z){if(w[v].contains(z.getRootNode()))y=z;});!y?j(0):void 0;return y;};u.prototype.$VideoWatchAndScrollController58=function(){'use strict';var v=this.$VideoWatchAndScrollController16.isMuted();this.$VideoWatchAndScrollController16.pause(c('VideoPlayerReason').USER);if(this.$VideoWatchAndScrollController16!==this.$VideoWatchAndScrollController17)this.$VideoWatchAndScrollController16.abortLoading();this.$VideoWatchAndScrollController16=this.$VideoWatchAndScrollController77(this.$VideoWatchAndScrollController36);this.$VideoWatchAndScrollController15=this.$VideoWatchAndScrollController16.getRootNode();var w=this.$VideoWatchAndScrollController16.getVideoNode(),x=parseFloat(w.getAttribute('data-original-aspect-ratio'));if(!x)x=16/9;var y=this.$VideoWatchAndScrollController46;if(!y)y=this.$VideoWatchAndScrollController57(w);this.$VideoWatchAndScrollController14&&(y.width=this.$VideoWatchAndScrollController14.getWidth());y.height=y.width/x;if(y.height>p){y.height=p;y.width=y.height*x;}this.$VideoWatchAndScrollController16.setDimensions(y.width,y.height);this.$VideoWatchAndScrollController49(w);this.$VideoWatchAndScrollController14&&this.$VideoWatchAndScrollController14.setState({videoIndex:this.$VideoWatchAndScrollController36,width:y.width,height:y.height});this.$VideoWatchAndScrollController46=y;this.$VideoWatchAndScrollController16.play(c('VideoPlayerReason').AUTOPLAY);v&&this.$VideoWatchAndScrollController16.mute();if(this.$VideoWatchAndScrollController35.length<=this.$VideoWatchAndScrollController36){this.$VideoWatchAndScrollController81();}else this.$VideoWatchAndScrollController77(this.$VideoWatchAndScrollController36+1).preload();};u.prototype.$VideoWatchAndScrollController83=function(){'use strict';var v=m;if(this.$VideoWatchAndScrollController12)v+=this.$VideoWatchAndScrollController12.scrollHeight;return Math.max(v,o);};u.prototype.$VideoWatchAndScrollController49=function(v){'use strict';if(this.$VideoWatchAndScrollController46){this.$VideoWatchAndScrollController7={height:this.$VideoWatchAndScrollController46.height,left:this.$VideoWatchAndScrollController46.left,top:this.$VideoWatchAndScrollController46.top,width:this.$VideoWatchAndScrollController46.width};return;}if(v){var w=v.scrollWidth,x=v.scrollHeight,y=this.$VideoWatchAndScrollController70(v),z=y*x/w;this.$VideoWatchAndScrollController7.height=z;this.$VideoWatchAndScrollController7.width=y;}else this.$VideoWatchAndScrollController7={height:this.$VideoWatchAndScrollController5,left:m,top:this.$VideoWatchAndScrollController83(),width:this.$VideoWatchAndScrollController6};};u.prototype.$VideoWatchAndScrollController78=function(v,w){'use strict';var x=c('DOM').create('canvas',{className:"_57n6"});x.height=v.height;x.width=v.width;if(x.getContext&&x.getContext('2d'))if(w.scrollHeight===0){var y=c('DOM').scry(w.parentNode,"._3t5i"),z=y[0];if(z){var aa=x.getContext('2d');aa.drawImage(z,0,0);}}else if(w instanceof window.HTMLVideoElement){var ba=new (c('VideoFrameBuffer'))(x,w);ba.updateFrameBuffer();}var ca=c('DOM').create('div');ca.appendChild(x);var da=c('DOM').create('i',{className:"_1jto _bsl _3htz"});ca.appendChild(da);return ca;};u.prototype.$VideoWatchAndScrollController60=function(){'use strict';if(this.$VideoWatchAndScrollController19)this.$VideoWatchAndScrollController51();this.$VideoWatchAndScrollController75();};u.prototype.$VideoWatchAndScrollController84=function(){'use strict';var v=this.$VideoWatchAndScrollController78(this.$VideoWatchAndScrollController7,this.$VideoWatchAndScrollController16.getVideoNode(),true);this.$VideoWatchAndScrollController14&&this.$VideoWatchAndScrollController14.setState({fadeOut:true,fadeOutPlaceholder:v});this.$VideoWatchAndScrollController85(this.$VideoWatchAndScrollController17,this.$VideoWatchAndScrollController8);if(this.$VideoWatchAndScrollController18){c('DOM').remove(this.$VideoWatchAndScrollController18);this.$VideoWatchAndScrollController18=null;}if(this.$VideoWatchAndScrollController13){this.$VideoWatchAndScrollController13.remove();this.$VideoWatchAndScrollController13=null;}};u.prototype.$VideoWatchAndScrollController85=function(v,w,x){'use strict';var y=v.getOption('VideoWithLiveBroadcast','isLive');v.pause(c('VideoPlayerReason').USER);if(v.isPlayerVersion('silvercity'))v.detachRootNode();x&&c('ReactDOM').unmountComponentAtNode(x);if(w.dimensions&&w.dimensions.width&&w.dimensions.height)v.setDimensions(w.dimensions.width,w.dimensions.height);if(w.videoRootNode)c('DOM').prependContent(w.videoRootNode,v.getRootNode());v.emit('WatchAndScroll/positionUpdated');v.logEvent(c('VideoPlayerLoggerEvent').PLAYER_FORMAT_CHANGED,{player_format:'inline'});if(y){v.pause(c('VideoPlayerReason').AUTOPLAY);if(!v.isPlayerVersion('silvercity'))v.mute();v.emit('resumeAutoplay');}};u.prototype.$VideoWatchAndScrollController79=function(){'use strict';!this.$VideoWatchAndScrollController4?j(0):void 0;!this.$VideoWatchAndScrollController40?j(0):void 0;this.$VideoWatchAndScrollController40.setState({fadeOut:true});this.$VideoWatchAndScrollController45=setTimeout(function(){!this.$VideoWatchAndScrollController41?j(0):void 0;!this.$VideoWatchAndScrollController42?j(0):void 0;this.$VideoWatchAndScrollController85(this.$VideoWatchAndScrollController41,this.$VideoWatchAndScrollController43,this.$VideoWatchAndScrollController42);if(this.$VideoWatchAndScrollController44){c('DOM').remove(this.$VideoWatchAndScrollController44);this.$VideoWatchAndScrollController44=null;}this.$VideoWatchAndScrollController45=null;}.bind(this),s);};u.prototype.$VideoWatchAndScrollController50=function(v){'use strict';!this.$VideoWatchAndScrollController4?j(0):void 0;if(v){!this.$VideoWatchAndScrollController14?j(0):void 0;this.$VideoWatchAndScrollController35.forEach(function(w){return w.abortLoading();});this.$VideoWatchAndScrollController84();this.$VideoWatchAndScrollController45=setTimeout(function(){c('ReactDOM').unmountComponentAtNode(this.$VideoWatchAndScrollController76());this.$VideoWatchAndScrollController50();}.bind(this),s);return;}this.$VideoWatchAndScrollController33&&this.$VideoWatchAndScrollController33.abandonRequest();this.$VideoWatchAndScrollController36=0;this.$VideoWatchAndScrollController1=false;this.$VideoWatchAndScrollController31.release();this.$VideoWatchAndScrollController31=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController8={};this.$VideoWatchAndScrollController16=null;this.$VideoWatchAndScrollController17=null;this.$VideoWatchAndScrollController4=false;this.$VideoWatchAndScrollController35=[];this.$VideoWatchAndScrollController38=[];this.$VideoWatchAndScrollController14=null;clearTimeout(this.$VideoWatchAndScrollController45);this.$VideoWatchAndScrollController45=null;if(this.$VideoWatchAndScrollController41&&this.$VideoWatchAndScrollController42&&this.$VideoWatchAndScrollController43)this.$VideoWatchAndScrollController85(this.$VideoWatchAndScrollController41,this.$VideoWatchAndScrollController43,this.$VideoWatchAndScrollController42);this.$VideoWatchAndScrollController41=null;this.$VideoWatchAndScrollController43={};if(this.$VideoWatchAndScrollController44){c('DOM').remove(this.$VideoWatchAndScrollController44);this.$VideoWatchAndScrollController44=null;}c('VideoAutoplayControllerX').setShouldAutoplay(true);this.$VideoWatchAndScrollController2=null;if(this.$VideoWatchAndScrollController22){this.$VideoWatchAndScrollController74();this.$VideoWatchAndScrollController55(this.$VideoWatchAndScrollController22,c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController22=null;}this.$VideoWatchAndScrollController29=false;this.$VideoWatchAndScrollController46=null;c('VideoChannelLogger').endSession();};u.prototype.$VideoWatchAndScrollController80=function(){'use strict';return c('ReactDOM').render(c('React').createElement(c('VideoWatchAndScrollContainer.react'),{initialPosition:this.$VideoWatchAndScrollController7,initialVideoElement:this.$VideoWatchAndScrollController15,onChannelNavigation:this.$VideoWatchAndScrollController86.bind(this),onClick:this.$VideoWatchAndScrollController87.bind(this),onClose:this.$VideoWatchAndScrollController60.bind(this),onDoubleClick:this.$VideoWatchAndScrollController88.bind(this),onDrop:this.$VideoWatchAndScrollController89.bind(this),onGrab:this.$VideoWatchAndScrollController90.bind(this),onInitialPositionUpdate:this.$VideoWatchAndScrollController91.bind(this),onReplay:this.$VideoWatchAndScrollController82.bind(this)}),this.$VideoWatchAndScrollController76());};u.prototype.$VideoWatchAndScrollController75=function(){'use strict';if(this.$VideoWatchAndScrollController17)this.$VideoWatchAndScrollController17.emit('exitWatchAndScroll');};u.prototype.$VideoWatchAndScrollController86=function(v){'use strict';if(v>0&&this.$VideoWatchAndScrollController35.length<=this.$VideoWatchAndScrollController36){this.$VideoWatchAndScrollController60();return;}this.$VideoWatchAndScrollController36+=v;this.$VideoWatchAndScrollController58();};u.prototype.$VideoWatchAndScrollController90=function(){'use strict';if(this.$VideoWatchAndScrollController19)this.$VideoWatchAndScrollController51();var v=this.$VideoWatchAndScrollController16.getOption('VideoWithLiveBroadcast','isLive');if(v)return;this.$VideoWatchAndScrollController23=this.$VideoWatchAndScrollController16.isState('playing');this.$VideoWatchAndScrollController16.pause(c('VideoPlayerReason').USER);};u.prototype.$VideoWatchAndScrollController89=function(){'use strict';var v=this.$VideoWatchAndScrollController16.getOption('VideoWithLiveBroadcast','isLive');if(v)return;if(this.$VideoWatchAndScrollController23)this.$VideoWatchAndScrollController16.play(c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController23=null;};u.prototype.$VideoWatchAndScrollController87=function(){'use strict';var v=this.$VideoWatchAndScrollController16.getOption('VideoWithLiveBroadcast','isLive');if(this.$VideoWatchAndScrollController19||v)return;if(this.$VideoWatchAndScrollController16.isState('playing')){this.$VideoWatchAndScrollController16.pause(c('VideoPlayerReason').USER);}else if(this.$VideoWatchAndScrollController16.isState('paused')||this.$VideoWatchAndScrollController16.isState('finished')||this.$VideoWatchAndScrollController16.isState('ready'))this.$VideoWatchAndScrollController16.play(c('VideoPlayerReason').USER);};u.prototype.$VideoWatchAndScrollController88=function(){'use strict';if(this.$VideoWatchAndScrollController19)return;var v=this.$VideoWatchAndScrollController16.getOption('VideoWithClickToChannelView','isChannelEligible'),w=this.$VideoWatchAndScrollController16.getVideoID()===this.$VideoWatchAndScrollController17.getVideoID();if(w&&!v)return;c('Bootloader').loadModules(["VideoChannelController"],function(x){this.$VideoWatchAndScrollController64();x.openFromVideoPlayer(this.$VideoWatchAndScrollController16,this.$VideoWatchAndScrollController16.getVideoChannelID(),this.$VideoWatchAndScrollController34,this.$VideoWatchAndScrollController63());}.bind(this),'VideoWatchAndScrollController');};u.prototype.$VideoWatchAndScrollController91=function(v){'use strict';this.$VideoWatchAndScrollController7=v;if(this.$VideoWatchAndScrollController14&&!this.$VideoWatchAndScrollController14.getFadeOutStatus()){this.$VideoWatchAndScrollController16.setDimensions(v.width,v.height);this.$VideoWatchAndScrollController16.emit('WatchAndScroll/positionUpdated');}};u.prototype.$VideoWatchAndScrollController92=function(){'use strict';var v=c('DOM').create('div');c('DOM').appendContent(document.body,v);return v;};u.prototype.$VideoWatchAndScrollController76=function(){'use strict';if(!this.$VideoWatchAndScrollController2)this.$VideoWatchAndScrollController2=this.$VideoWatchAndScrollController92();return this.$VideoWatchAndScrollController2;};f.exports=u;}),null);