if (self.CavalryLogger) { CavalryLogger.start_js(["jIW2u"]); }

__d('VideoChannelEndScreen',['cx','invariant','CSS','DOM','Event','React','ReactDOM','VideoChannelProgressCircle.react','VideoChannelReplayImage.react'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l){'use strict';this.$VideoChannelEndScreen1=c('DOM').create('div',{className:"_1szy"});this.$VideoChannelEndScreen2=c('DOM').create('div',{className:"_1szz _2se8"},this.$VideoChannelEndScreen1);this.$VideoChannelEndScreen3=l;c('Event').listen(this.$VideoChannelEndScreen1,'click',k);}j.prototype.showEndScreen=function(k,l,m){'use strict';!k?i(0):void 0;c('CSS').addClass(k,"_1s-2");k.appendChild(this.$VideoChannelEndScreen2);c('ReactDOM').render(c('React').createElement(c('VideoChannelProgressCircle.react'),{makeProgress:l,onProgressDone:m,timeoutSec:j.TIMEOUT},c('React').createElement(c('VideoChannelReplayImage.react'),null)),this.$VideoChannelEndScreen1);};j.prototype.endCountdown=function(k){'use strict';!k?i(0):void 0;this.$VideoChannelEndScreen3&&this.$VideoChannelEndScreen3();c('CSS').removeClass(k,"_1s-2");c('ReactDOM').unmountComponentAtNode(this.$VideoChannelEndScreen1);};j.prototype.getContainer=function(){'use strict';return this.$VideoChannelEndScreen2;};j.TIMEOUT=3;f.exports=j;}),null);
__d('VideoChannelUpNextUnit.react',['csx','cx','DOM','Link.react','React','getElementText'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=320;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;n.prototype.render=function(){'use strict';var o=this.props.thumbnail,p=c('DOM').find(o,"._56dc"),q=c('DOM').find(o,"._38a4"),r=p.style.backgroundImage,s=c('getElementText')(q),t={backgroundImage:r},u=(this.props.dialogWidth-m)/2,v={marginLeft:u+'px'};return (c('React').createElement(c('Link.react'),{className:"_4fxr",href:'#',onClick:this.props.onClick,style:v},c('React').createElement('div',{className:"_4fxs",style:t}),c('React').createElement('div',{className:"_4fxt"},c('React').createElement('div',{className:"_4fxu"},'Up Next:'),c('React').createElement('div',{className:"_4fxw"},s))));};function n(){'use strict';j.apply(this,arguments);}n.propTypes={dialogWidth:l.number.isRequired,onClick:l.func.isRequired,thumbnail:l.object.isRequired};f.exports=n;}),null);
__d("XVideoChannelViewDetailsAsyncController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/channel\/view\/details\/async\/{video_id}\/",{ad_impression_token:{type:"String"},video_id:{type:"Int",required:true},caller:{type:"Enum",defaultValue:"channel_view_from_unknown",enumType:1}});}),null);
__d('VideoChannelInteraction',['csx','cx','fbt','invariant','Animation','Arbiter','AsyncRequest','CSS','DOM','Event','FullScreen','Keys','Map','Parent','React','ReactDOM','StreamingReactionsTrayEvents','Style','SubscriptionsHandler','UFIRootRegistry','UFIUIEvents','VideoChannelController','VideoChannelEndScreen','VideoChannelLogger','VideoChannelLoggerEvents','VideoChannelLoggerEventTargets','VideoChannelLoggerFields','VideoChannelUpNextUnit.react','VideoChannelViewVariables','VideoPlayerAbortLoadingExperiment','VideoPlayerController','VideoPlayerReason','VideoStripThumbnailCarousel.react','VideoWatchAndScrollController','XVideoChannelViewDetailsAsyncController','setImmediate'],(function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=5000,m=175,n=45,o=80,p=24,q=35,r=c('VideoChannelViewVariables').thumbnailRedesign,s=c('VideoChannelViewVariables').videoRedesign,t=c('VideoChannelViewVariables').dynamicAspectRatios,u=c('VideoChannelViewVariables').preopenUFI,v=c('VideoChannelViewVariables').notPreloadNext360,w={},x=16/9,y=x;function z(aa){'use strict';this.$VideoChannelInteraction6=aa;this.$VideoChannelInteraction1=false;this.$VideoChannelInteraction3=0;this.$VideoChannelInteraction4=0;this.$VideoChannelInteraction13=[];this.$VideoChannelInteraction25=null;this.$VideoChannelInteraction26=[];this.$VideoChannelInteraction15=false;this.$VideoChannelInteraction23=false;this.$VideoChannelInteraction16=new (c('Map'))();this.$VideoChannelInteraction17=new (c('Map'))();this.$VideoChannelInteraction27=false;this.$VideoChannelInteraction28=false;this.$VideoChannelInteraction29=false;this.$VideoChannelInteraction35=false;this.$VideoChannelInteraction37=false;this.$VideoChannelInteraction5=new (c('SubscriptionsHandler'))();this.$VideoChannelInteraction7=c('DOM').create('a',{href:'#',className:"_5yhq",'aria-label':j._("Next Video")});this.$VideoChannelInteraction8=c('DOM').create('a',{href:'#',className:"_5yhr",'aria-label':j._("Previous Video")});this.$VideoChannelInteraction30=new (c('VideoChannelEndScreen'))(function(){this.$VideoChannelInteraction38();this.getVideoController().play(c('VideoPlayerReason').USER);}.bind(this));this.$VideoChannelInteraction39();this.$VideoChannelInteraction5.addSubscriptions(c('Event').listen(document,'mousemove',this.$VideoChannelInteraction40.bind(this)),c('Event').listen(document,'click',this.$VideoChannelInteraction40.bind(this)),c('Event').listen(document,'keydown',this.$VideoChannelInteraction41.bind(this)),c('Event').listen(document,'keyup',this.$VideoChannelInteraction42.bind(this)),c('Event').listen(this.$VideoChannelInteraction7,'click',this.$VideoChannelInteraction43.bind(this)),c('Event').listen(this.$VideoChannelInteraction8,'click',this.$VideoChannelInteraction44.bind(this)),c('Arbiter').subscribe(c('UFIUIEvents').AutoplayLiveComments,function(ba,ca){var da=ca.form,ea=c('DOM').scry(this.$VideoChannelInteraction9.children[this.getCurrentAbsoluteIndex()],"._sa_"),fa=ea[0],ga=c('DOM').scry(da,".fbPhotosSnowliftFeedback"),ha=ga[0];if(!ha||!fa||!da.contains(fa))return;new (c('Animation'))(ha).to('scrollTop',fa.offsetTop).ease(c('Animation').ease.end).duration(250).go();}.bind(this)),c('Arbiter').subscribe('comment_content_change',function(ba,ca){if(ca.text!==undefined){this.$VideoChannelInteraction35=ca.text!=='';}else if(ca.addingAttachment!==undefined)this.$VideoChannelInteraction37=ca.addingAttachment;this.$VideoChannelInteraction45();}.bind(this)),c('Arbiter').subscribe('video_upload_cancel',function(){this.$VideoChannelInteraction37=false;this.$VideoChannelInteraction45();}.bind(this)),c('FullScreen').subscribe('changed',function(){this.$VideoChannelInteraction45();}.bind(this)));this.$VideoChannelInteraction46();this.$VideoChannelInteraction47();}z.prototype.$VideoChannelInteraction47=function(){'use strict';this.$VideoChannelInteraction19=0;this.$VideoChannelInteraction20=false;this.$VideoChannelInteraction5.addSubscriptions(c('Arbiter').subscribe('layer_shown',function(aa,ba){var ca=this.getVideoController();if(ca.getOption('VideoWithLiveBroadcast','isLive'))return;if(ba.type==='DialogX'||ba.type==='PhotoSnowlift'){this.$VideoChannelInteraction19=this.$VideoChannelInteraction19+1;if(this.$VideoChannelInteraction19>0)if(ca.isState('playing')){ca.pause(c('VideoPlayerReason').PAGE_VISIBILITY);this.$VideoChannelInteraction20=true;}this.$VideoChannelInteraction45();}}.bind(this)),c('Arbiter').subscribe('layer_hidden',function(aa,ba){var ca=this.getVideoController();if(ca.getOption('VideoWithLiveBroadcast','isLive'))return;if(ba.type==='DialogX'||ba.type==='PhotoSnowlift'){this.$VideoChannelInteraction19=this.$VideoChannelInteraction19-1;if(this.$VideoChannelInteraction19===0&&this.$VideoChannelInteraction20){ca.play(c('VideoPlayerReason').PAGE_VISIBILITY);this.$VideoChannelInteraction20=false;}this.$VideoChannelInteraction45();}}.bind(this)));};z.prototype.onChannelClose=function(){'use strict';this.$VideoChannelInteraction36&&this.$VideoChannelInteraction48(this.$VideoChannelInteraction36,false);c('CSS').hide(this.$VideoChannelInteraction8);c('CSS').hide(this.$VideoChannelInteraction7);this.$VideoChannelInteraction5&&this.$VideoChannelInteraction5.release();this.$VideoChannelInteraction18&&this.$VideoChannelInteraction18.abandon();clearTimeout(this.$VideoChannelInteraction2);this.$VideoChannelInteraction38();this.$VideoChannelInteraction35=false;this.$VideoChannelInteraction37=false;c('UFIRootRegistry').cleanupSnowliftNodes();y=x;};z.prototype.onWindowResize=function(){'use strict';if(t)this.$VideoChannelInteraction49();this.$VideoChannelInteraction46();this.$VideoChannelInteraction50();this.$VideoChannelInteraction51(0);};z.prototype.$VideoChannelInteraction50=function(){'use strict';if(this.$VideoChannelInteraction33&&this.$VideoChannelInteraction32){var aa=this.$VideoChannelInteraction6.getVideoHeight()*this.$VideoChannelInteraction33,ba=this.$VideoChannelInteraction6.getVideoWidth(),ca=ba-aa,da=ca/2;c('Style').set(this.$VideoChannelInteraction32,'width',this.$VideoChannelInteraction34*n+da+'px');c('Style').set(this.$VideoChannelInteraction32,'margin-top',o+'px');}};z.prototype.$VideoChannelInteraction46=function(){'use strict';var aa=this.$VideoChannelInteraction9,ba=false;if(s)try{var da=this.getVideoControllerForStory(aa.children[this.getCurrentAbsoluteIndex()]);if(da){var ea=da.getOption('VideoWithLiveBroadcast','isLive');if(ea)ba=true;}}catch(ca){}var fa=(this.$VideoChannelInteraction6.getAvailableWidth()-this.$VideoChannelInteraction6.getVideoWidth())/2;fa+=this.$VideoChannelInteraction12?-1*m:0;c('Style').set(aa,'left',fa+'px');var ga=(this.$VideoChannelInteraction6.getAvailableHeight()-this.$VideoChannelInteraction6.getVideoHeight()-(ba?o:0))/2;c('Style').set(aa,'top',ga+'px');c('Style').set(aa,'width',this.$VideoChannelInteraction6.getVideoWidth()+'px');c('Style').set(aa,'height',this.$VideoChannelInteraction6.getVideoHeight()+'px');};z.prototype.isCenterVideoActive=function(){'use strict';return this.$VideoChannelInteraction3===0;};z.prototype.getCurrentAbsoluteIndex=function(){'use strict';return this.$VideoChannelInteraction3+this.$VideoChannelInteraction4;};z.prototype.$VideoChannelInteraction52=function(aa){'use strict';return aa+this.$VideoChannelInteraction4;};z.prototype.$VideoChannelInteraction53=function(aa){'use strict';return aa-this.$VideoChannelInteraction4;};z.prototype.$VideoChannelInteraction54=function(){'use strict';return this.$VideoChannelInteraction6.getDialog();};z.prototype.$VideoChannelInteraction55=function(){'use strict';return this.$VideoChannelInteraction6.getDialogContent();};z.prototype.setTitle=function(aa,ba){'use strict';if(!r||!s)c('DOM').setContent(this.$VideoChannelInteraction11,aa);if(ba){var ca=this.$VideoChannelInteraction56(),da=ca.currentStory,ea=ca.currentThumbnail;!da?k(0):void 0;!ea?k(0):void 0;this.setFirstStory(da,ea,true,true);}};z.prototype.$VideoChannelInteraction56=function(){'use strict';var aa=this.$VideoChannelInteraction6.getStoryFetcher(),ba=aa.getPreloadedData(),ca=ba.stories,da=ba.thumbnails;ca=ca||[];da=da||[];var ea=this.$VideoChannelInteraction6.getWnsChannelVideoIndex();if(ea===0)return {currentStory:null,currentThumbnail:null,prependStories:[],prependThumbnails:[],appendStories:ca,appendThumbnails:da};ea--;return {currentStory:ca[ea],currentThumbnail:da[ea],prependStories:ca.slice(0,ea),prependThumbnails:da.slice(0,ea),appendStories:ca.slice(ea+1),appendThumbnails:da.slice(ea+1)};};z.prototype.$VideoChannelInteraction57=function(aa){'use strict';var ba={};ba[c('VideoChannelLoggerFields').EVENT]=c('VideoChannelLoggerEvents').CLICK;ba[c('VideoChannelLoggerFields').STORY_ID]=aa.getAttribute('data-story-id');c('VideoChannelLogger').log(ba);};z.prototype.$VideoChannelInteraction58=function(aa){'use strict';this.updateActiveStory(this.$VideoChannelInteraction52(aa),c('VideoPlayerReason').USER);};z.prototype.$VideoChannelInteraction59=function(aa){'use strict';var ba=this.$VideoChannelInteraction52(aa),ca=this.getVideoControllerForStory(this.$VideoChannelInteraction9.children[ba]);if(ca&&ca.hasOption('VideoWithImmediateAbortLoading','isWithImmediateAbortLoading'))ca.preload();};z.prototype.$VideoChannelInteraction60=function(aa){'use strict';var ba={};ba[c('VideoChannelLoggerFields').EVENT]=c('VideoChannelLoggerEvents').CLICK;ba[c('VideoChannelLoggerFields').EVENT_TARGET]=aa;c('VideoChannelLogger').log(ba);};z.prototype.$VideoChannelInteraction43=function(event){'use strict';this.$VideoChannelInteraction60(c('VideoChannelLoggerEventTargets').NEXT_ARROW);this.$VideoChannelInteraction61();this.$VideoChannelInteraction40();event.stopPropagation();event.preventDefault();};z.prototype.$VideoChannelInteraction61=function(){'use strict';var aa=this.getCurrentAbsoluteIndex();if(aa<this.$VideoChannelInteraction9.children.length-1){this.updateActiveStory(aa+1,c('VideoPlayerReason').AUTOPLAY);return true;}return false;};z.prototype.$VideoChannelInteraction44=function(event){'use strict';this.$VideoChannelInteraction60(c('VideoChannelLoggerEventTargets').PREVIOUS_ARROW);this.$VideoChannelInteraction62();this.$VideoChannelInteraction40();event.stopPropagation();event.preventDefault();};z.prototype.$VideoChannelInteraction62=function(){'use strict';var aa=this.getCurrentAbsoluteIndex();if(aa>=1){this.updateActiveStory(aa-1,c('VideoPlayerReason').AUTOPLAY);return true;}return false;};z.prototype.updateActiveStory=function(aa,ba){'use strict';var ca=this.getCurrentAbsoluteIndex();if(ca===aa)return;var da=this.$VideoChannelInteraction9,ea=this.getVideoControllerForStory(da.children[ca]),fa=ea&&ea.isMuted();if(ea&&!ea.isState('finished')){ea.pause(c('VideoPlayerReason').USER);if(c('VideoPlayerAbortLoadingExperiment').canAbort)ea.abortLoading();}var ga=da.children[aa],ha=this.getVideoControllerForStory(ga);if(ha){c('Arbiter').inform('VideoChannelView/activeStoryChanged',{id:ha.getVideoID()});if(ha.isAd()){c('Arbiter').inform('WebVideoChannelAds/AdsLoaded');ba=c('VideoPlayerReason').AUTOPLAY;}if(fa&&!ha.isMuted()){ha.mute();}else if(!fa&&ha.isMuted())ha.unmute();ha.play(ba);}var ia=null;if(da.children.length>aa+1){ia=this.getVideoControllerForStory(da.children[aa+1]);if(ia&&(!ia.isSpherical()||!v))ia.preload();}this.$VideoChannelInteraction3=this.$VideoChannelInteraction53(aa);c('VideoChannelLogger').setPosition(this.$VideoChannelInteraction3);if(!ga.getAttribute('channel-vpv-logged')){var ja={};ga.setAttribute('channel-vpv-logged','1');ja[c('VideoChannelLoggerFields').EVENT]=c('VideoChannelLoggerEvents').VPV;ja[c('VideoChannelLoggerFields').STORY_ID]=ga.getAttribute('data-story-id');ja[c('VideoChannelLoggerFields').IS_AD]=ha?ha.isAd():false;c('VideoChannelLogger').log(ja);}this.$VideoChannelInteraction35=false;this.$VideoChannelInteraction37=false;this.$VideoChannelInteraction48(ga,true);this.$VideoChannelInteraction63();};z.prototype.$VideoChannelInteraction63=function(){'use strict';var aa=this.$VideoChannelInteraction9,ba=this.getCurrentAbsoluteIndex();if(ba>0){c('CSS').show(this.$VideoChannelInteraction8);}else c('CSS').hide(this.$VideoChannelInteraction8);for(var ca=0;ca<aa.children.length;ca++){var da=ca===ba;c('CSS').conditionClass(aa.children[ca],"_1kfp",da);c('CSS').conditionClass(this.$VideoChannelInteraction13[ca],"_57j4",da);}this.$VideoChannelInteraction24=c('DOM').find(aa.children[ba],"._21mb");this.$VideoChannelInteraction24.insertBefore(this.$VideoChannelInteraction8,this.$VideoChannelInteraction24.firstChild);this.$VideoChannelInteraction24.appendChild(this.$VideoChannelInteraction7);if(t)this.$VideoChannelInteraction49();if(ba<aa.children.length-1||this.$VideoChannelInteraction6.hasNext()){c('CSS').show(this.$VideoChannelInteraction7);}else c('CSS').hide(this.$VideoChannelInteraction7);this.$VideoChannelInteraction51(0);var ea=this.$VideoChannelInteraction6.getStoryFetcher(),fa=ea?ea.getPreloadedData():{stories:[]},ga=fa.stories,ha=this.$VideoChannelInteraction6.isCameFromVidewViewCarousel();if(ba>=aa.children.length-2&&this.$VideoChannelInteraction6.hasNext()){this.$VideoChannelInteraction64();}else if(ba===0&&(ga.length===0||ha))this.$VideoChannelInteraction6.fetchStories(false,function(ia,ja){this.prependStories(ia,ja);}.bind(this),function(ia){this.showThumbnailPlaceholders(ia,false);}.bind(this));if(this.$VideoChannelInteraction12)this.$VideoChannelInteraction65(this.$VideoChannelInteraction9.children[ba],this.getVideoController().getVideoID(),this.getVideoController().getAdClientToken());this.$VideoChannelInteraction6.getViewportTracker().fireTimer();this.$VideoChannelInteraction6.getViewportTracker().updateTimeTrackingData(false,'scroll');};z.prototype.$VideoChannelInteraction49=function(){'use strict';if(!this.$VideoChannelInteraction17.size)return;var aa=w[this.getVideoController().getVideoID()]||this.$VideoChannelInteraction6.getOriginalAspectRatio()||x;y=aa;var ba=this.$VideoChannelInteraction6.getAvailableVideoHeight(),ca=this.$VideoChannelInteraction6.getAvailableVideoWidth(),da=0,ea=0;if(y*ba>ca){ea=ca;da=ca/y;}else{da=ba;ea=ba*y;}this.$VideoChannelInteraction6.setVideoDimensions(ea,da,this.$VideoChannelInteraction6.getExtraThumbnailHeight());this.$VideoChannelInteraction46();this.$VideoChannelInteraction50();this.$VideoChannelInteraction66(ea);};z.prototype.$VideoChannelInteraction66=function(aa){'use strict';var ba=c('DOM').find(this.$VideoChannelInteraction9.children[this.getCurrentAbsoluteIndex()],"._5pw_"),ca=c('DOM').find(this.$VideoChannelInteraction9.children[this.getCurrentAbsoluteIndex()],"._5px1"),da="_337o";c('CSS').conditionClass(ba,da,aa<=q+ba.clientWidth+ca.clientWidth);};z.prototype.showThumbnailPlaceholders=function(aa,ba){'use strict';var ca=ba?0:aa;this.$VideoChannelInteraction51(ca);};z.prototype.$VideoChannelInteraction40=function(){'use strict';this.$VideoChannelInteraction67();this.$VideoChannelInteraction2=setTimeout(this.$VideoChannelInteraction68.bind(this),l);};z.prototype.$VideoChannelInteraction42=function(aa){'use strict';if(aa.keyCode===c('Keys').RIGHT){this.$VideoChannelInteraction28=false;}else if(aa.keyCode===c('Keys').LEFT)this.$VideoChannelInteraction29=false;};z.prototype.$VideoChannelInteraction41=function(aa){'use strict';this.$VideoChannelInteraction67();this.$VideoChannelInteraction2=setTimeout(this.$VideoChannelInteraction68.bind(this),l);var ba=c('CSS').matchesSelector(aa.target,"._gn2"),ca=this.$VideoChannelInteraction12&&(c('CSS').matchesSelector(aa.target,"._5rpu")||c('CSS').hasClass(aa.target,'UFIAddCommentInput')),da=c('CSS').matchesSelector(aa.target,"._iuw");if(ba||ca||da||this.$VideoChannelInteraction19>0||this.getVideoController().isFullscreen())return;if(aa.keyCode===c('Keys').RIGHT&&!this.$VideoChannelInteraction28){this.$VideoChannelInteraction28=true;this.$VideoChannelInteraction60(c('VideoChannelLoggerEventTargets').NEXT_ARROW_KEY);this.$VideoChannelInteraction61();event.preventDefault();}else if(aa.keyCode===c('Keys').LEFT&&!this.$VideoChannelInteraction29){this.$VideoChannelInteraction29=true;this.$VideoChannelInteraction60(c('VideoChannelLoggerEventTargets').PREVIOUS_ARROW_KEY);this.$VideoChannelInteraction62();event.preventDefault();}else if(aa.keyCode===c('Keys').SPACE){var ea=this.getVideoController();if(ea.isState('playing')){ea.pause(c('VideoPlayerReason').USER);}else if(ea.isState('paused')||ea.isState('finished')||ea.isState('ready'))ea.play(c('VideoPlayerReason').USER);}};z.prototype.$VideoChannelInteraction68=function(){'use strict';if(!this.getVideoController().isState('playing'))return;if(!this.$VideoChannelInteraction1&&c('VideoChannelViewVariables').dark_mode){this.$VideoChannelInteraction1=true;c('CSS').addClass(this.$VideoChannelInteraction54().getRoot(),"_1kf_");}};z.prototype.$VideoChannelInteraction67=function(){'use strict';clearTimeout(this.$VideoChannelInteraction2);if(this.$VideoChannelInteraction1){this.$VideoChannelInteraction1=false;c('CSS').removeClass(this.$VideoChannelInteraction54().getRoot(),"_1kf_");}};z.prototype.$VideoChannelInteraction39=function(){'use strict';var aa=this.$VideoChannelInteraction55();this.$VideoChannelInteraction9=c('DOM').create('div',{className:"_1kfk"});c('DOM').appendContent(aa,this.$VideoChannelInteraction9);this.$VideoChannelInteraction21=c('DOM').create('div');c('ReactDOM').render(c('React').createElement('div',{className:r?"_4hvx":''},c('React').createElement('div',{className:"_r7b"},c('React').createElement('div',{className:"_5g7c"}),c('React').createElement('div',{className:"_r7d"})),c('React').createElement('div',{className:"_1sz-"})),this.$VideoChannelInteraction21);c('DOM').appendContent(aa,this.$VideoChannelInteraction21);this.$VideoChannelInteraction11=c('DOM').find(this.$VideoChannelInteraction54().getInnerContent(),"._5g7c");this.$VideoChannelInteraction10=c('DOM').find(this.$VideoChannelInteraction54().getInnerContent(),"._r7d");this.$VideoChannelInteraction22=c('DOM').find(this.$VideoChannelInteraction21,"._1sz-");};z.prototype.$VideoChannelInteraction69=function(){'use strict';this.$VideoChannelInteraction60(c('VideoChannelLoggerEventTargets').UP_NEXT);this.$VideoChannelInteraction61();};z.prototype.$VideoChannelInteraction70=function(aa){'use strict';var ba=this.getCurrentAbsoluteIndex();if(!this.$VideoChannelInteraction15&&this.$VideoChannelInteraction13.length>ba+1&&aa===this.getVideoController()){var ca=this.$VideoChannelInteraction13[ba+1];if(ca){c('ReactDOM').render(c('React').createElement(c('VideoChannelUpNextUnit.react'),{dialogWidth:this.$VideoChannelInteraction6.getAvailableWidth(),onClick:this.$VideoChannelInteraction69.bind(this),thumbnail:ca}),this.$VideoChannelInteraction22);c('CSS').addClass(this.$VideoChannelInteraction21,"_1sz_");this.$VideoChannelInteraction23=true;}}};z.prototype.$VideoChannelInteraction71=function(){'use strict';c('CSS').removeClass(this.$VideoChannelInteraction21,"_1sz_");this.$VideoChannelInteraction23=false;};z.prototype.$VideoChannelInteraction72=function(aa){'use strict';this.$VideoChannelInteraction5.addSubscriptions(aa.addListener('updateStatus',function(ba){if(ba.position!==undefined){var ca=aa.getPlaybackDuration();if(aa===this.getVideoController()&&ca&&ca-ba.position<5){if(!this.$VideoChannelInteraction23)this.$VideoChannelInteraction70(aa);}else this.$VideoChannelInteraction71();}}.bind(this)));};z.prototype.$VideoChannelInteraction73=function(aa){'use strict';this.$VideoChannelInteraction5.addSubscriptions(aa.addListener('beginPlayback',this.$VideoChannelInteraction38.bind(this)),aa.addListener('finishPlayback',function(){var ba=this.$VideoChannelInteraction6.isOpen()&&aa===this.getVideoController()&&!aa.isFullscreen();if(ba)this.$VideoChannelInteraction45();}.bind(this)));};z.prototype.$VideoChannelInteraction45=function(){'use strict';var aa=this.getVideoController();if(aa.isState('finished')){var ba=this.getCurrentAbsoluteIndex(),ca=ba===this.$VideoChannelInteraction9.children.length-1,da=this.$VideoChannelInteraction35||this.$VideoChannelInteraction37,ea=aa.getOption('VideoWithLiveBroadcast','isLive'),fa=true;if(c('VideoChannelViewVariables').autoplaySettingDisabled||ca||!s&&!r&&(!u||da)&&this.$VideoChannelInteraction12||this.$VideoChannelInteraction27||this.$VideoChannelInteraction19!=0||ea)fa=false;if(aa.getOption('VideoLiveEndscreen','enabled')){if(fa)this.$VideoChannelInteraction31=setTimeout(this.$VideoChannelInteraction74.bind(this),c('VideoChannelEndScreen').TIMEOUT*1000);return;}this.$VideoChannelInteraction75(fa);}};z.prototype.$VideoChannelInteraction75=function(aa){'use strict';this.$VideoChannelInteraction67();this.$VideoChannelInteraction30.showEndScreen(this.$VideoChannelInteraction24,aa,this.$VideoChannelInteraction74.bind(this));};z.prototype.$VideoChannelInteraction38=function(){'use strict';if(this.$VideoChannelInteraction31){clearTimeout(this.$VideoChannelInteraction31);this.$VideoChannelInteraction31=null;}this.$VideoChannelInteraction30.endCountdown(this.$VideoChannelInteraction24);};z.prototype.$VideoChannelInteraction74=function(){'use strict';if(this.getVideoController().isState('finished')){this.$VideoChannelInteraction38();if(this.$VideoChannelInteraction61()){var aa={};aa[c('VideoChannelLoggerFields').EVENT]=c('VideoChannelLoggerEvents').AUTO_ADVANCE;aa[c('VideoChannelLoggerFields').POSITION_IN_CHANNEL]=this.getCurrentAbsoluteIndex()-1;c('VideoChannelLogger').log(aa);}}};z.prototype.$VideoChannelInteraction51=function(aa){'use strict';var ba=this.$VideoChannelInteraction6.getAvailableWidth();if(r)ba-=p;if(this.$VideoChannelInteraction13.length===1&&this.$VideoChannelInteraction15||this.$VideoChannelInteraction13.length>1&&!this.$VideoChannelInteraction15)this.$VideoChannelInteraction76();c('ReactDOM').render(c('React').createElement(c('VideoStripThumbnailCarousel.react'),{dialogWidth:ba,extraThumbnailHeight:this.$VideoChannelInteraction6.getExtraThumbnailHeight(),pendingPreviousThumbnails:aa,thumbnails:this.$VideoChannelInteraction13.slice(0),index:this.getCurrentAbsoluteIndex(),hasNext:this.$VideoChannelInteraction6.hasNext(),loadNextItems:this.$VideoChannelInteraction64.bind(this),onAllItemsLoaded:this.$VideoChannelInteraction77.bind(this)}),this.$VideoChannelInteraction10);};z.prototype.$VideoChannelInteraction64=function(){'use strict';this.$VideoChannelInteraction6.fetchStories(true,function(aa,ba){this.appendStories(aa,ba);}.bind(this));};z.prototype.$VideoChannelInteraction77=function(){'use strict';this.getVideoController().emit('VideoChannelController/chainedStoriesLoaded');};z.prototype.getVideoController=function(){'use strict';var aa=this.$VideoChannelInteraction9.children[this.getCurrentAbsoluteIndex()],ba=this.getVideoControllerForStory(aa);!ba?k(0):void 0;return ba;};z.prototype.$VideoChannelInteraction78=function(aa,ba,ca){'use strict';var da=void 0;if(!ca){this.$VideoChannelInteraction4++;da=-this.$VideoChannelInteraction4;this.$VideoChannelInteraction9.insertBefore(aa,this.$VideoChannelInteraction9.childNodes[0]);this.$VideoChannelInteraction13.unshift(ba);}else{da=this.$VideoChannelInteraction9.children.length-this.$VideoChannelInteraction4;this.$VideoChannelInteraction9.appendChild(aa);this.$VideoChannelInteraction13.push(ba);}this.$VideoChannelInteraction5.addSubscriptions(c('Event').listen(aa,'click',this.$VideoChannelInteraction57.bind(this,aa)),c('Event').listen(ba,'click',function(fa,event){if(c('Parent').bySelector(event.target,"._4hvy"))return;if(this.$VideoChannelInteraction15){this.$VideoChannelInteraction60(c('VideoChannelLoggerEventTargets').THUMBNAIL);this.$VideoChannelInteraction58(fa);event.preventDefault();}}.bind(this,da)),c('Event').listen(ba,'mouseover',function(fa,event){if(this.$VideoChannelInteraction15){this.$VideoChannelInteraction59(fa);event.preventDefault();}}.bind(this,da)));if(!this.$VideoChannelInteraction17.has(aa.id)){var ea=this.$VideoChannelInteraction6.findVideoControllerForStory(aa);if(ea){this.$VideoChannelInteraction16.set(ea,aa);this.$VideoChannelInteraction17.set(aa.id,ea);}}this.$VideoChannelInteraction6.getViewportTracker().invalidateAllStoriesCache();};z.prototype.$VideoChannelInteraction79=function(){'use strict';for(var aa=0;aa<this.$VideoChannelInteraction26.length;aa++){var ba=this.$VideoChannelInteraction26[aa];c('Style').set(ba,'opacity','');}this.$VideoChannelInteraction25=null;this.$VideoChannelInteraction26=[];};z.prototype.$VideoChannelInteraction80=function(aa){'use strict';if(!this.$VideoChannelInteraction25)this.$VideoChannelInteraction25=c('setImmediate')(this.$VideoChannelInteraction79.bind(this));this.$VideoChannelInteraction26.push(aa);c('Style').set(aa,'opacity',0);};z.prototype.shouldShowSidePanelOnLoad=function(){'use strict';var aa=this.getVideoController(),ba=aa.getOption('VideoWithLiveBroadcast','isLive'),ca=aa.getOption('VideoWithVODBroadcast','isLiveVOD'),da=aa.getOption('FeedAutoplay','shouldOpenSidePaneInChannelView');return r||s||ba||ca||da||u;};z.prototype.$VideoChannelInteraction48=function(aa,ba){'use strict';if(!t)return;var ca=c('DOM').scry(aa,"._4lqt");if(ca.length===2){c('CSS').conditionShow(ca[0],c('CSS').matchesSelector(ca[0],"._3t0x")==ba);c('CSS').conditionShow(ca[1],c('CSS').matchesSelector(ca[1],"._3t0x")==ba);}};z.prototype.setFirstStory=function(aa,ba,ca,da){'use strict';this.$VideoChannelInteraction80(c('DOM').find(aa,"._23if"));this.$VideoChannelInteraction80(c('DOM').find(aa,"._23ig"));if(!ca){var ea=this.$VideoChannelInteraction6.getWNSRootVideoPlayerController(),fa=c('DOM').find(aa,"._1kg0");!ea?k(0):void 0;var ga=ea.getRootNode();this.$VideoChannelInteraction36=ga;c('DOM').replace(fa,ga);this.$VideoChannelInteraction78(aa,ba,false);this.$VideoChannelInteraction63();this.registerVideoController(ea);return;}this.$VideoChannelInteraction78(aa,ba,true);this.$VideoChannelInteraction63();var ha=this.$VideoChannelInteraction6.getOriginalVideoPlayerController();if(!ha)setTimeout(function(){if(this.shouldShowSidePanelOnLoad())this.$VideoChannelInteraction81();var ra=this.$VideoChannelInteraction6.getVideoControllers();if(!ra.length)return;var sa=ra[0].getOption('WatchAndScroll','isEligible');this.$VideoChannelInteraction6.updateWNSEligibilityButton(sa);}.bind(this));if(ha){var ia=this.$VideoChannelInteraction56(),ja=ia.prependStories,ka=ia.prependThumbnails,la=ia.appendStories,ma=ia.appendThumbnails;if(!da){var na=c('DOM').find(aa,"._1kg0"),oa=ha.getRootNode();this.$VideoChannelInteraction36=oa;c('DOM').replace(na,oa);}else{var pa=c('DOM').scry(aa,"._5v-_");if(pa.length===1&&pa[0].childNodes.length===0)pa[0].appendChild(ha.getRootNode());}ha.setDimensions(this.$VideoChannelInteraction6.getVideoWidth(),this.$VideoChannelInteraction6.getVideoHeight());if(!ha.isState('paused'))ha.play(c('VideoPlayerReason').USER);this.$VideoChannelInteraction72(ha);this.$VideoChannelInteraction73(ha);this.$VideoChannelInteraction16.set(ha,aa);this.$VideoChannelInteraction17.set(aa.id,ha);if(this.shouldShowSidePanelOnLoad())this.$VideoChannelInteraction81();this.prependStories(ja,ka);this.appendStories(la,ma);this.$VideoChannelInteraction6.registerWNSVideoControllers();this.$VideoChannelInteraction6.registerChannelInteractionsFromWNS();var qa=ha.getOption('WatchAndScroll','isEligible');this.$VideoChannelInteraction6.updateWNSEligibilityButton(qa);}this.$VideoChannelInteraction6.hideLoadingState();this.$VideoChannelInteraction76();this.$VideoChannelInteraction48(aa,true);this.$VideoChannelInteraction63();};z.prototype.appendStories=function(aa,ba){'use strict';for(var ca=0;ca<aa.length;ca++){var da=aa[ca],ea=ba[ca];this.$VideoChannelInteraction80(c('DOM').find(da,"._21mb"));this.$VideoChannelInteraction80(ea);this.$VideoChannelInteraction78(da,ea,true);}this.$VideoChannelInteraction63();};z.prototype.prependStories=function(aa,ba){'use strict';aa=aa.reverse();ba=ba.reverse();for(var ca=0;ca<aa.length;ca++)this.$VideoChannelInteraction78(aa[ca],ba[ca],false);this.$VideoChannelInteraction63();};z.prototype.$VideoChannelInteraction81=function(event){'use strict';this.$VideoChannelInteraction60(c('VideoChannelLoggerEventTargets').SHOW_SIDE_PANE);event&&event.preventDefault();if(this.$VideoChannelInteraction12)return;this.$VideoChannelInteraction12=true;this.$VideoChannelInteraction65(this.$VideoChannelInteraction9.children[this.getCurrentAbsoluteIndex()],this.getVideoController().getVideoID(),this.getVideoController().getAdClientToken());c('CSS').addClass(this.$VideoChannelInteraction54().getRoot(),"_57bj");c('Arbiter').inform(c('StreamingReactionsTrayEvents').ShowChannelViewDetails);this.$VideoChannelInteraction45();this.$VideoChannelInteraction46();};z.prototype.$VideoChannelInteraction65=function(aa,ba,ca){'use strict';this.$VideoChannelInteraction18&&this.$VideoChannelInteraction18.abandon();var da=c('DOM').scry(aa,"._260p")[0];if(!da){var ea=c('DOM').scry(aa,"._5pc9"),fa=ea[0];if(!fa||!fa.childNodes||!fa.childNodes.length)da=c('DOM').scry(aa,"._3upq")[0];}var ga=this.$VideoChannelInteraction6.getVideoChainingCaller(),ha=c('XVideoChannelViewDetailsAsyncController').getURIBuilder().setInt('video_id',ba).setEnum('caller',ga);if(ca)ha.setString('ad_impression_token',ca);if(da){this.$VideoChannelInteraction18=new (c('AsyncRequest'))().setRelativeTo(da).setURI(ha.getURI()).setMethod('GET').setReadOnly(true).setHandler(function(){this.$VideoChannelInteraction18=null;}.bind(this)).setErrorHandler(function(){this.$VideoChannelInteraction18=null;}.bind(this));this.$VideoChannelInteraction18.send();}};z.prototype.$VideoChannelInteraction82=function(event){'use strict';this.$VideoChannelInteraction60(c('VideoChannelLoggerEventTargets').HIDE_SIDE_PANE);this.$VideoChannelInteraction18&&this.$VideoChannelInteraction18.abandon();this.$VideoChannelInteraction12=false;c('CSS').removeClass(this.$VideoChannelInteraction54().getRoot(),"_57bj");c('Arbiter').inform(c('StreamingReactionsTrayEvents').HideChannelViewDetails);this.$VideoChannelInteraction46();this.$VideoChannelInteraction45();event&&event.preventDefault();};z.prototype.$VideoChannelInteraction76=function(){'use strict';var aa=this.$VideoChannelInteraction54().getRoot();if(this.$VideoChannelInteraction15){c('CSS').removeClass(aa,"_r7e");}else c('CSS').addClass(aa,"_r7e");this.$VideoChannelInteraction15=!this.$VideoChannelInteraction15;};z.prototype.registerShowDetailsLink=function(aa){'use strict';c('Event').listen(aa,'click',function(){var ba=z.getInteraction();!ba?k(0):void 0;ba.$VideoChannelInteraction81();});};z.prototype.registerHideDetailsLink=function(aa){'use strict';c('Event').listen(aa,'click',function(){var ba=z.getInteraction();!ba?k(0):void 0;ba.$VideoChannelInteraction82();});};z.prototype.registerLiveReactionsInput=function(aa,ba,ca){'use strict';this.$VideoChannelInteraction32=aa;this.$VideoChannelInteraction33=ba;this.$VideoChannelInteraction34=ca;this.$VideoChannelInteraction50();};z.prototype.registerShareSheetVisibility=function(aa){'use strict';var ba=z.getInteraction();!ba?k(0):void 0;ba.$VideoChannelInteraction27=aa;ba.$VideoChannelInteraction45();};z.prototype.registerVideoController=function(aa){'use strict';this.$VideoChannelInteraction72(aa);this.$VideoChannelInteraction73(aa);var ba=c('VideoChannelController').getVideoChannel();if(!ba)return;aa.setIsInChannel(true);ba.registerVideoController(aa);if(this.$VideoChannelInteraction16.has(aa))return;var ca=this.findStoryForVideoController(aa);if(ca){this.$VideoChannelInteraction16.set(aa,ca);this.$VideoChannelInteraction17.set(ca.id,aa);}};z.prototype.findStoryForVideoController=function(aa){'use strict';for(var ba=0;ba<this.$VideoChannelInteraction9.children.length;++ba){var ca=this.$VideoChannelInteraction9.children[ba];if(ca.contains(aa.getRootNode()))return ca;}return null;};z.prototype.getVideoControllerForStory=function(aa){'use strict';return this.$VideoChannelInteraction17.get(aa.id);};z.prototype.getStoryForVideoController=function(aa){'use strict';return this.$VideoChannelInteraction16.get(aa);};z.prototype.getStoryIndex=function(aa){'use strict';for(var ba=0;ba<this.$VideoChannelInteraction9.children.length;++ba)if(aa===this.$VideoChannelInteraction9.children[ba])return ba;return -1;};z.getInteraction=function(){'use strict';var aa=c('VideoChannelController').getVideoChannel();if(!aa)return null;var ba=aa.getInteraction();if(!ba){ba=new z(aa);aa.setInteraction(ba);}return ba;};z.setTitle=function(aa,ba){'use strict';var ca=z.getInteraction();if(!ca)return;ca.setTitle(aa,ba);};z.setFirstStory=function(aa,ba,ca){'use strict';var da=z.getInteraction();if(!da)return;da.setFirstStory(aa,ba,ca);};z.registerShowDetailsLink=function(aa){'use strict';var ba=z.getInteraction();if(!ba){c('VideoWatchAndScrollController').registerChannelInteraction(function(){var ca=z.getInteraction();!ca?k(0):void 0;ca.registerShowDetailsLink(aa);});return;}ba.registerShowDetailsLink(aa);};z.registerHideDetailsLink=function(aa){'use strict';var ba=z.getInteraction();if(!ba){c('VideoWatchAndScrollController').registerChannelInteraction(function(){var ca=z.getInteraction();!ca?k(0):void 0;ca.registerHideDetailsLink(aa);});return;}ba.registerHideDetailsLink(aa);};z.registerLiveReactionsInput=function(aa,ba,ca){'use strict';var da=z.getInteraction();if(!da){c('VideoWatchAndScrollController').registerChannelInteraction(function(){var ea=z.getInteraction();!ea?k(0):void 0;ea.registerLiveReactionsInput(aa,ba,ca);});return;}da.registerLiveReactionsInput(aa,ba,ca);};z.registerShareSheetVisibility=function(aa){'use strict';var ba=z.getInteraction();if(!ba){c('VideoWatchAndScrollController').registerChannelInteraction(function(){var ca=z.getInteraction();!ca?k(0):void 0;ca.registerShareSheetVisibility(aa);});return;}ba.registerShareSheetVisibility(aa);};z.registerVideoController=function(aa){'use strict';var ba=z.getInteraction();if(!ba)return;ba.registerVideoController(aa);};z.registerAspectRatio=function(aa,ba){'use strict';w[aa]=ba;var ca=z.getInteraction();if(t&&ca&&ca.$VideoChannelInteraction16.size){var da=ca.getCurrentAbsoluteIndex(),ea=ca.$VideoChannelInteraction9,fa=ca.getVideoControllerForStory(ea.children[da]);if(y!==ba&&fa&&fa.getVideoID()===aa)ca.$VideoChannelInteraction63();}};f.exports=z;}),null);
__d('VideoChannelShareButton.react',['React','UFIShareNowMenuBootloader.react','VideoChannelInteraction'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){'use strict';var k=this.props,l=k.endpoint,m=k.endpointData,n=function p(){c('VideoChannelInteraction').registerShareSheetVisibility(true);},o=function p(){c('VideoChannelInteraction').registerShareSheetVisibility(false);};return (c('React').createElement(c('UFIShareNowMenuBootloader.react'),{endpoint:l,endpointData:m,onShow:n,onHide:o}));};function j(){'use strict';h.apply(this,arguments);}f.exports=j;}),null);